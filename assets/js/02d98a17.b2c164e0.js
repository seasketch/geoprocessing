"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[70513],{456:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>a,contentTitle:()=>n,default:()=>u,frontMatter:()=>i,metadata:()=>c,toc:()=>h});var r=s(74848),o=s(28453);const i={},n="Custom Sketch Attributes",c={id:"tutorials/sketchAttributes",title:"Custom Sketch Attributes",description:"Sketch attributes are additional properties provided with a Sketch Feature or a Sketch Collection. They can be user-defined at draw time or by the SeaSketch platform itself. The SeaSketch admin tool lets you add custom attributes to your sketch classes. SeaSketch will pass these sketch attributes on to geoprocessing functions.",source:"@site/docs/tutorials/sketchAttributes.md",sourceDirName:"tutorials",slug:"/tutorials/sketchAttributes",permalink:"/geoprocessing/docs/next/tutorials/sketchAttributes",draft:!1,unlisted:!1,editUrl:"https://github.com/seasketch/geoprocessing/tree/main/website/templates/shared/docs/tutorials/sketchAttributes.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Worker Functions",permalink:"/geoprocessing/docs/next/workers"},next:{title:"Extra Function Parameters",permalink:"/geoprocessing/docs/next/tutorials/extraParams"}},a={},h=[{value:"Accessing sketch properties from report client",id:"accessing-sketch-properties-from-report-client",level:2},{value:"Accessing sketch properties from function",id:"accessing-sketch-properties-from-function",level:2}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"custom-sketch-attributes",children:"Custom Sketch Attributes"})}),"\n",(0,r.jsxs)(t.p,{children:["Sketch attributes are additional properties provided with a Sketch Feature or a Sketch Collection. They can be user-defined at draw time or by the SeaSketch platform itself. The SeaSketch admin tool lets you add custom attributes to your ",(0,r.jsx)(t.a,{href:"https://docs.seasketch.org/seasketch-documentation/administrators-guide/sketch-classes",children:"sketch classes"}),". SeaSketch will pass these sketch attributes on to geoprocessing functions."]}),"\n",(0,r.jsx)(t.p,{children:"Potential use cases:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Geoprocessor","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"assign a protection level or type to an area, such that the geoprocessing function (and resulting report) can assess against the required amount of protection for each level."}),"\n",(0,r.jsx)(t.li,{children:"Assign allowed activities to an area, that the function can assign a protection level. This is particularly useful when reporting on an entire SketchCollection. The function can group results by protection level and ensure that overlap is not double counted within each group, and allow overlap between groups to go to the higher protection level."}),"\n",(0,r.jsx)(t.li,{children:"Passing an extra yes/no attribute for whether to include existing protected areas as part of your sketch."}),"\n",(0,r.jsx)(t.li,{children:"Provide language translations for each sketch attribute name and description."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"accessing-sketch-properties-from-report-client",children:"Accessing sketch properties from report client"}),"\n",(0,r.jsxs)(t.p,{children:["The main way to access sketch attributes in a browser client is the ",(0,r.jsx)(t.a,{href:"https://seasketch.github.io/geoprocessing/api/modules/client_ui.html#useSketchProperties",children:"useSketchProperties()"})," hook. Examples include:"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://github.com/seasketch/geoprocessing/blob/dev/packages/geoprocessing/src/components/SketchAttributesCard.tsx",children:"SketchAttributesCard"})," and ",(0,r.jsx)(t.a,{href:"https://seasketch.github.io/geoprocessing/storybook/?path=/story/components-card-sketchattributescard--next",children:"story"})," with ",(0,r.jsx)(t.a,{href:"https://github.com/seasketch/geoprocessing/blob/dev/packages/geoprocessing/src/components/SketchAttributesNextCard.stories.tsx",children:"source"})]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"accessing-sketch-properties-from-function",children:"Accessing sketch properties from function"}),"\n",(0,r.jsxs)(t.p,{children:["Withing a preprocessing or geoprocessing function, the ",(0,r.jsx)(t.a,{href:"https://seasketch.github.io/geoprocessing/api/modules/geoprocessing.html#SketchProperties",children:"SketchProperties"})," are provided within every sketch. Within that are ",(0,r.jsx)(t.a,{href:"https://seasketch.github.io/geoprocessing/api/modules/geoprocessing.html#UserAttribute",children:"userAttributes"})," that contain all of the user-defined attributes."]}),"\n",(0,r.jsxs)(t.p,{children:["For example, assume your Polygon sketch class contains an attribute called ",(0,r.jsx)(t.code,{children:"ACTIVITIES"})," which is an array of allowed activities for this sketch class. And you have a second attribute called ",(0,r.jsx)(t.code,{children:"ISLAND"})," that is a string containing the name of the island this sketch is located. You can access it as follow:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:"export async function protection(\n  sketch: Sketch<Polygon> | SketchCollection<Polygon>\n): Promise<ReportResult> {\n  const sketches = toSketchArray(sketch);\n  // Complex attributes are JSON that need to be parsed\n  const activities = getJsonUserAttribute(sketches[0], 'ACTIVITIES')\n  // Simple attributes are simple strings or numbers that can be used directly\n  const island = getUserAttribute(sketches[0], 'ISLAND')\n"})}),"\n",(0,r.jsx)(t.p,{children:"Examples of working with user attributes:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://github.com/seasketch/geoprocessing/blob/1301dc787aeff59ed29ceb07ed2d925984da6abf/packages/geoprocessing/src/iucn/helpers.ts#L36",children:"getIucnCategoryForSketches"})," takes an array of sketches, extracts the list of IUCN ",(0,r.jsx)(t.code,{children:"ACTIVITIES"})," the sketch designated as allowed for each sketch, and returns the category (protection level) for each sketch. The sketch array can be generated from the ",(0,r.jsx)(t.code,{children:"sketch"})," parameter passed to a geoprocessing functions using ",(0,r.jsx)(t.a,{href:"https://github.com/seasketch/geoprocessing/blob/1301dc787aeff59ed29ceb07ed2d925984da6abf/packages/geoprocessing/src/helpers/sketch.ts#L83",children:"toSketchArray()`"}),". toSketchArray helps you write single functions that work on either a single sketch or a collection of sketches."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://github.com/seasketch/fsm-reports/blob/main/src/functions/boundaryAreaOverlap.ts#L26",children:"isContiguous"})," function that optionally merges the contiguous zone with the users sketch. Checks for existence of a ",(0,r.jsx)(t.a,{href:"https://github.com/seasketch/fsm-reports/blob/main/src/util/includeContiguousSketch.ts#L28",children:"specific user attribute"})]}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>n,x:()=>c});var r=s(96540);const o={},i=r.createContext(o);function n(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:n(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);