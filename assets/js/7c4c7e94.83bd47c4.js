"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[65533],{32601:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>a});var s=n(74848),i=n(28453);const o={slug:"/testing"},r="Testing",l={id:"Testing",title:"Testing",description:"Run single unit or smoke test",source:"@site/docs/Testing.md",sourceDirName:".",slug:"/testing",permalink:"/geoprocessing/docs/next/testing",draft:!1,unlisted:!1,editUrl:"https://github.com/seasketch/geoprocessing/tree/main/website/templates/shared/docs/Testing.md",tags:[],version:"current",frontMatter:{slug:"/testing"},sidebar:"tutorialSidebar",previous:{title:"Antimeridian",permalink:"/geoprocessing/docs/next/antimeridian"},next:{title:"Storybook",permalink:"/geoprocessing/docs/next/tutorials/storybook"}},c={},a=[{value:"Run single unit or smoke test",id:"run-single-unit-or-smoke-test",level:2},{value:"Testing API calls using Postman",id:"testing-api-calls-using-postman",level:2},{value:"Testing API calls using API Gateway",id:"testing-api-calls-using-api-gateway",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"testing",children:"Testing"})}),"\n",(0,s.jsx)(t.h2,{id:"run-single-unit-or-smoke-test",children:"Run single unit or smoke test"}),"\n",(0,s.jsx)(t.p,{children:"To run only tests matching a specific name/description, you just need a portion of the test name/description to match on. For example for the following test:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.code,{children:'test("kelpPersist - tests run against all examples", async () => {'})}),"\n",(0,s.jsxs)(t.p,{children:["You could run\n",(0,s.jsx)(t.code,{children:"npm run test:matching 'kelpPersist - tests run against all examples'"})]}),"\n",(0,s.jsx)(t.p,{children:"or simply"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.code,{children:"npm run test:matching kelpPersist"})}),"\n",(0,s.jsxs)(t.p,{children:["If is a smoke test or any test requiring access to the dev data server then in a separate shell you will need to first run ",(0,s.jsx)(t.code,{children:"npm run start:data"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"testing-api-calls-using-postman",children:"Testing API calls using Postman"}),"\n",(0,s.jsx)(t.p,{children:"A public collection of API calls for working with a report project is at"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{href:"https://www.postman.com/seasketch/workspace/seasketch/collection/624822-1a2906ba-3360-428f-a09e-41dae1b8282e",children:"https://www.postman.com/seasketch/workspace/seasketch/collection/624822-1a2906ba-3360-428f-a09e-41dae1b8282e"})}),"\n",(0,s.jsxs)(t.p,{children:["Setup the collection variables to use it. Your ",(0,s.jsx)(t.code,{children:"geometryUri"})," will need to come from SeaSketch. Try running a report from within SeaSketch and looking at the API call in the ",(0,s.jsx)(t.code,{children:"Network"})," tab of your developer tools"]}),"\n",(0,s.jsx)(t.h2,{id:"testing-api-calls-using-api-gateway",children:"Testing API calls using API Gateway"}),"\n",(0,s.jsx)(t.p,{children:"After signing into the AWS Console:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Search for and select ",(0,s.jsx)(t.code,{children:"API Gateway"})]}),"\n",(0,s.jsx)(t.li,{children:"In the top right, select the AWS region your stack is deployed"}),"\n",(0,s.jsx)(t.li,{children:"Find the REST API Gateway for your project and open it"}),"\n",(0,s.jsxs)(t.li,{children:["Click either ",(0,s.jsx)(t.code,{children:"GET"})," or ",(0,s.jsx)(t.code,{children:"POST"})," for any of the geoprocessing functions in the list"]}),"\n",(0,s.jsxs)(t.li,{children:["Click the ",(0,s.jsx)(t.code,{children:"Test"})," button with the lightning bolt"]}),"\n",(0,s.jsx)(t.li,{children:"Look at the Postman API calls for which query parameters (GET) or body JSON (POST) to enter."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"An alternative way to find your API gateway is:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["From the AWS Console, search for and select ",(0,s.jsx)(t.code,{children:"CloudFormation"})]}),"\n",(0,s.jsx)(t.li,{children:"In the top right, select the AWS region your stack is deployed"}),"\n",(0,s.jsx)(t.li,{children:"Find the stack for your geoprocessing project"}),"\n",(0,s.jsxs)(t.li,{children:["Click the ",(0,s.jsx)(t.code,{children:"Resources"})," tab"]}),"\n",(0,s.jsxs)(t.li,{children:["Search for ",(0,s.jsx)(t.code,{children:"AWS::ApiGateway::RestApi"})]}),"\n",(0,s.jsxs)(t.li,{children:["Click the link to the gateway under ",(0,s.jsx)(t.code,{children:"Physical ID"})]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>l});var s=n(96540);const i={},o=s.createContext(i);function r(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);