<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-gip/GIP-1-i18n" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">GIP 1: i18n Localization | SeaSketch Geoprocessing</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://seasketch.github.io/geoprocessing/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://seasketch.github.io/geoprocessing/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://seasketch.github.io/geoprocessing/docs/gip/GIP-1-i18n"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="GIP 1: i18n Localization | SeaSketch Geoprocessing"><meta data-rh="true" name="description" content="Geoprocessing Improvement Proposal 1"><meta data-rh="true" property="og:description" content="Geoprocessing Improvement Proposal 1"><link data-rh="true" rel="icon" href="/geoprocessing/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://seasketch.github.io/geoprocessing/docs/gip/GIP-1-i18n"><link data-rh="true" rel="alternate" href="https://seasketch.github.io/geoprocessing/docs/gip/GIP-1-i18n" hreflang="en"><link data-rh="true" rel="alternate" href="https://seasketch.github.io/geoprocessing/docs/gip/GIP-1-i18n" hreflang="x-default"><link rel="stylesheet" href="/geoprocessing/assets/css/styles.264bfde1.css">
<script src="/geoprocessing/assets/js/runtime~main.005e8658.js" defer="defer"></script>
<script src="/geoprocessing/assets/js/main.d6899c54.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/geoprocessing/"><div class="navbar__logo"><img src="/geoprocessing/img/ss-logo.png" alt="Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/geoprocessing/img/ss-logo.png" alt="Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Geoprocessing</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/geoprocessing/docs/">Docs</a><a class="navbar__item navbar__link" href="/geoprocessing/docs/api">Typescript API</a><a href="https://seasketch.github.io/geoprocessing/storybook/index.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">UI Component Library<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/seasketch/geoprocessing" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/geoprocessing/docs/">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geoprocessing/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geoprocessing/docs/concepts">Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geoprocessing/docs/tutorials">Tutorials</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geoprocessing/docs/cli">Command Line Interface (CLI)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geoprocessing/docs/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geoprocessing/docs/Migrating">Migration Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geoprocessing/docs/extending">Extending</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geoprocessing/docs/tipsandtricks">Tips and Tricks</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/geoprocessing/docs/api/">Library</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/geoprocessing/docs/gip/GIP-1-i18n">Advanced Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/geoprocessing/docs/gip/GIP-1-i18n">GIP 1: i18n Localization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geoprocessing/docs/limits">Edge Cases &amp; Limits</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geoprocessing/docs/testing">Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geoprocessing/docs/contributing">Contributing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/geoprocessing/docs/tipsandtricks">Other</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/geoprocessing/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Advanced Guides</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">GIP 1: i18n Localization</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>GIP 1: i18n Localization</h1></header>
<p>Geoprocessing Improvement Proposal 1</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="need">Need<a href="#need" class="hash-link" aria-label="Direct link to Need" title="Direct link to Need">​</a></h2>
<ul>
<li>SeaSketch Next supports language translation and there is an opportunity for reports to offer language translation in sync (current active language and language switch events).</li>
<li>Over half of SeaSketch projects would benefit from supporting additional languages in reports, users may want to choose from 2-3 different languages.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="glossary">Glossary<a href="#glossary" class="hash-link" aria-label="Direct link to Glossary" title="Direct link to Glossary">​</a></h2>
<p>Term - A unique string to be translated. Typically it will be the exact string to translate in English language, or it may just be a descriptor.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h2>
<p>Overall:</p>
<ul>
<li>Should support all languages supported by SeaSketch Next including right-to-left (RTL) languages.</li>
<li>Both the core geoprocessing library, and individual geoprocessing projects that use it should support translation.</li>
<li>Geoprocessing projects should be able to build on base translations provided for library UI components, but still be managed independently.</li>
<li>At runtime, reports will default to english language.</li>
<li>The SeaSketch platform (via iFrame postMessage) will dictate which language is loaded initially, and be able to change the language.</li>
<li>If a language is provided that the geoprocessing library or project does not support then it should fallback to English.</li>
</ul>
<p>Geoprocessing library:</p>
<ul>
<li>Core UI components should be 100% translated for all languages.</li>
<li>The source code will be the source of truth for all terms to be translated, and their English translations, with the exception of specially handled plural terms.</li>
<li>Terms, and their English translation will mostly be extracted from the source code in an automated process. A manual process may be used for special cases like handling plural terms.</li>
<li>The geoprocessing library will manage translations for non-english languages for its core UI components and templates using the <a href="https://poeditor.com" target="_blank" rel="noopener noreferrer">POEditor</a> platform. POEditor will be the source of truth for these translations.</li>
<li>Terms/English translations from geoprocessing library code and translated strings from POEditor will be brought together into a single bundle of <code>base</code> translations, where they will be mainted in the library git repository.</li>
</ul>
<p>Geoprocessing projects:</p>
<ul>
<li>Geoprocessing projects will install and use the <code>base</code> translations from the geoprocessing library for all core UI components and templates used in reports.</li>
<li><code>base</code> terms/translations will be kept separate from project terms/translations in POEditor, as well as in the project. This will ensure that base translations can be upgraded, without affecting project translations. It will also allow project-specific translations to be customized, without losing the base translations.</li>
<li><code>base</code> and project terms/translations should be merged at runtime to provide all of the terms/translations needed for the reports, which will be a mix of core and custom components. If a term exists in both the <code>base</code> and <code>project</code> translation bundle, the project translation will win.</li>
<li>Geoprocessing projects will manage all other terms and translations for custom reports, using the same workflow as the geoprocessing library.</li>
<li>Geoprocessing project report developers, who are independent of the SeaSketch team, should be able to manage translations in their own POEditor project, just by changing their access credentials.</li>
<li>Report developers independent of the SeaSketch team should also have the option to manage translations entirely within the code repo, without using a translation service like POEditor.</li>
<li>Translators will be invited to the appropriate POEditor project to review and update any and all translations for their language(s) of expertise.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementation">Implementation<a href="#implementation" class="hash-link" aria-label="Direct link to Implementation" title="Direct link to Implementation">​</a></h2>
<ul>
<li>A single POEditor project will be used to manage both <code>base</code> and <code>project</code> terms and translations.</li>
<li><code>base</code> terms and translations will be kept separate from project terms and translations in POEditor using <code>context</code>. Context allows the same term string value to be duplicated in POEditor, with different translations for each.</li>
</ul>
<p>CLI commands will be the main way developers work with translations.</p>
<ul>
<li><code>translation:extract</code>
<ul>
<li>extracts all translations using babel and <a href="https://github.com/gilbsgilbs/babel-plugin-i18next-extract" target="_blank" rel="noopener noreferrer">babel-plugin-i18next-extract</a>.</li>
</ul>
</li>
<li><code>translation:publish</code>
<ul>
<li>Posts translations for all languages to POEDITOR</li>
<li>Behavior is configured via <code>src/i18n/config.ts</code>. Translations with namespace specified by <code>localNamespace</code> are written to POEditor with context value specified by <code>remoteContext</code>.</li>
<li>All english translations are published, overwriting any in POEditor, since the code is their source of truth.</li>
<li>For non-english languages, POEditor is the source of truth, so if a translation is not defined in POEditor, then a local project translation is published if available, to seed it the first time.</li>
<li>For GP projects, if a project translation is not available, then a base translation will be published as fallback if available. Running <code>translation:import</code> after that will then import those base translations back and seed the local project translations.</li>
</ul>
</li>
<li><code>translation:import</code>
<ul>
<li>fetches translations from POEditor for all non-english languages having context value specified by <code>remotextContex</code> property in <code>src/i18n/config.son</code>. Any existing translation values will be overwritten. Translations are saved to the namespace specified by the <code>localNamespace</code> property in <code>project/i18n.json</code>.</li>
</ul>
</li>
<li><code>translation:sync</code>
<ul>
<li>runs in succession <code>extract</code>, <code>publish</code>, then <code>import</code>.</li>
</ul>
</li>
<li><code>translation:install</code> (available in gp project only)<!-- -->
<ul>
<li>copies base translations from the installed geoprocessing library to the projects <code>src/i18n/baseLang</code> directory, overwriting any previous version.</li>
</ul>
</li>
</ul>
<p>Configuration files:</p>
<ul>
<li>A <code>i18n/supported.ts</code> file will contain all supported languages, with a unique language code for each. When POEditor is used, then languages get added there as well for each one.</li>
<li>An <code>project/i18n.json</code> file will be used to map the local i18n data model (e.g. keys, namespaces) to those of POEditor (terms, context. Specifically it dictates which local i18n namespace to extract translations from (defaults to <code>translation</code>), and which remote POEditor context to publish terms/translations to, and import terms/translations from. The <code>remoteContext</code> value will vary. For the core geoprocessing library the context will be set to <code>base</code> and for geoprocessing project it will be set to the name of the project, as defined in package.json. For example:</li>
</ul>
<p>geoprocessing library internal i18n.json:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;localNamespace&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;translation&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;remoteContext&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;base&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>i18n.json file for geoprocessing project called <code>fsm-reports</code>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;localNamespace&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;translation&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;remoteContext&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;fsm-reports&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For geoprocessing library:</p>
<ul>
<li>On build of the geoprocessing library, the i18n directory will be copied into the dist folder as part of the base-project.</li>
<li>CLI commands will live at the root of the monorepo and work on all translatable strings in the <code>geoprocessing</code> package, as well as all <code>template-*</code> packages.</li>
<li>Translations will be maintained in <code>packages/geoprocessing/src/i18n</code></li>
<li>On publish, always push all local English translations. For all non-english langauges, push translations if it doesn&#x27;t already exist in POEditor.</li>
<li>Prior to every release of the library, UI text string (terms) will need to get updated in POEditor and translated for all languages.</li>
</ul>
<p>For geoprocessing projects:</p>
<ul>
<li>CLI commands will live at the root of the project.</li>
<li>When creating a new geoprocessing project, the <code>base</code> translations for the current version of the gp library are installed to the project at <code>src/i18n/baseLang</code>. Report developers should not edit this.</li>
<li>Report developers working on a geoprocessing project should not need to make sure that they keep their base translations up to date. They should automatically upgrade on every run of <code>npm install</code> using the <code>prepare</code> command.</li>
<li>Project translations are managed alongside base translations under <code>src/i18n/lang</code>. These can be edited but typically will be done via CLI commands (see use cases below).</li>
<li>When initially created, each geoprocessing project will have <code>base</code> translations installed.</li>
<li>On publish, always push all local English translations. For all non-english langauges, push translations if it doesn&#x27;t already exist in POEditor. Additionally, for all languages, if there is no local project translation, fallback to base translation if it exists.</li>
<li>Prior to a reports being used for planning, UI text strings( terms) will need to get published to POEditor, translated for the relevant subset of languages, then imported back into the library.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="translations-within-library-templates">Translations Within Library Templates<a href="#translations-within-library-templates" class="hash-link" aria-label="Direct link to Translations Within Library Templates" title="Direct link to Translations Within Library Templates">​</a></h3>
<ul>
<li><code>template-*</code> monorepo packages are essentially little geoprocessing projects. The only difference is Lerna symlink them to the sibling geoprocessing package on <code>npm install</code>. You can treat templates just like a geoprocessing project and use all available CLI commands from within the monorepo.</li>
<li>However, since we chose to converge all i18n translations into the geoprocess packages, if we want translations to load in storybook for templates, you have to symlink the core geoprocessing i18n over to the template. Without that the storybook should still load but the translations will fail in error.<!-- -->
<ul>
<li>`ln -s packages/geoprocessing/src/i18n/ packages/template-ocean-eez/src/i18n</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="client-side-language-load-and-switch">Client-side language load and switch<a href="#client-side-language-load-and-switch" class="hash-link" aria-label="Direct link to Client-side language load and switch" title="Direct link to Client-side language load and switch">​</a></h2>
<ul>
<li>SSN will send a <code>language</code> property within <code>SeasketchReportingInitEvent</code> message.</li>
<li>It will pass the same code used in <a href="https://github.com/seasketch/next/blob/master/packages/client/src/lang/supported.ts" target="_blank" rel="noopener noreferrer">SSN</a>.</li>
<li>geoprocessing library will maintain its own version of that file in its i18n folder, and if SSN sends a code that&#x27;s not supported it will gracefully fallback to the default language, with a console.warn</li>
<li>SSN will also send a new message to change language - <code>SeaSketchReportingChangeLanguageEvent</code> if the user switches.</li>
<li>App.tsx will read the language code from the postMessage event sent by SSN and store this in context. If there is a change language event, then this code stored in context will be updated. The language will default to <code>en</code> English and be updated with the initial language passed by SSN.</li>
<li>A <code>useLanguage()</code> hook will be provided that provides access to the current language stored in context and will trigger an update when the language changes. It also offers a <code>changeLanguage()</code> function, to change the current language.</li>
<li>each project client will load translations by wrapping a <code>Translator</code> react component, which creates an <code>i18n</code> instance (using i18nAsync.ts that lazy loads languages by default but i18nSync.ts is also available) and passes it in to <code>i18nextProvider</code>.</li>
<li>There is one i18n instance for each report client so that they are isolated and multiple can be loaded in storybook, or even an app at once.</li>
<li>The Translator will listen for language changes using the useLanguage hook. If it changes, it will tell the i18n instance to change it&#x27;s language, which will load the appropriate resource file and all translations in the UI will update.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="storybook">Storybook<a href="#storybook" class="hash-link" aria-label="Direct link to Storybook" title="Direct link to Storybook">​</a></h2>
<ul>
<li>A language switcher will be wrapped around all stories, allowing the language to be switched.</li>
<li>Report clients will have a built-in Translator, but for UI components that don&#x27;t, a Translator is wrapped in the story.</li>
<li>Translations just work in storybook. Its webpack setup supports dynamic imports.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="report-development-use-cases">Report development use cases<a href="#report-development-use-cases" class="hash-link" aria-label="Direct link to Report development use cases" title="Direct link to Report development use cases">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="for-all-report-development-use-cases">For all report development use cases<a href="#for-all-report-development-use-cases" class="hash-link" aria-label="Direct link to For all report development use cases" title="Direct link to For all report development use cases">​</a></h3>
<ul>
<li>As developer creates new reports, they will wrap all strings destined to be displayed in the UI in translate functions using react-i18n such as <code>t()</code>, <code>&lt;Trans&gt;</code> etc.</li>
<li>A <code>namespace</code> should not be defined for these strings.</li>
<li>A unique <code>key</code> typically does need to be defined for these strings, as the key will default to the english string.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-reports-developed-by-seasketch-team-using-poeditor">1. Reports developed by SeaSketch Team using POEDITOR<a href="#1-reports-developed-by-seasketch-team-using-poeditor" class="hash-link" aria-label="Direct link to 1. Reports developed by SeaSketch Team using POEDITOR" title="Direct link to 1. Reports developed by SeaSketch Team using POEDITOR">​</a></h3>
<ul>
<li>Developer will configure POEDITOR project ID and Key environment variables.</li>
<li>Developer will use all translation CLI commands (extract, import, publish, sync)</li>
<li>Translator will filter by context as needed to just the terms they need to translate.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-reports-developed-by-external-developer-using-poeditor">2. Reports developed by external developer using POEDITOR<a href="#2-reports-developed-by-external-developer-using-poeditor" class="hash-link" aria-label="Direct link to 2. Reports developed by external developer using POEDITOR" title="Direct link to 2. Reports developed by external developer using POEDITOR">​</a></h3>
<ul>
<li>The user will create their own POEDITOR project and get the environment variables for project and api key setup.</li>
<li>If POEditor free account does not suffice, then if you make the report code public and open source, then you can request upgrade to a free premium account in POEditor interface.</li>
<li>Translator will use POEDITOR to translate, and they will not need to filter by tag because all strings should be reviewed.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-reports-developed-by-external-developer-not-using-poeditor-but-in-local-repo">3. Reports developed by external developer not using POEDITOR but in local repo<a href="#3-reports-developed-by-external-developer-not-using-poeditor-but-in-local-repo" class="hash-link" aria-label="Direct link to 3. Reports developed by external developer not using POEDITOR but in local repo" title="Direct link to 3. Reports developed by external developer not using POEDITOR but in local repo">​</a></h3>
<ul>
<li>Developer will use <code>translation:extract</code> but not <code>translation:import</code> and <code>translation:publish</code>.</li>
<li>Developer uses <code>i18n-ally</code> (which vscode settings are established for) to translate strings.</li>
<li>A separate translation service could also be integrated other than POEditor.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="language-translation-tutorial">Language Translation Tutorial<a href="#language-translation-tutorial" class="hash-link" aria-label="Direct link to Language Translation Tutorial" title="Direct link to Language Translation Tutorial">​</a></h2>
<p>The geoprocessign framework implements the GIP-1 proposal for language translation, and uses POEditor as its third-party service, allowing translators to more easily provide translations.</p>
<p>This is more formally known as <code>internationalization</code> or <code>i18n</code> for short which is a reference to the word internationalization being the letter <code>i</code> followed by 18 letters, then the letter <code>n</code>.</p>
<p>You do not need to complete this step unless you want to support language translation.</p>
<p>POEditor offers free translation for open source projects, but you are not required to use it. You can maintain your translations locally.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="managing-translations-using-poeditor">Managing Translations Using POEditor<a href="#managing-translations-using-poeditor" class="hash-link" aria-label="Direct link to Managing Translations Using POEditor" title="Direct link to Managing Translations Using POEditor">​</a></h2>
<p>There are 4 commands you will commonly use in working with translations: <code>translation:extract</code>, <code>translation:publish</code>, <code>translation:import</code> and <code>translation:sync</code>. You can read more about them on the <a href="/geoprocessing/docs/cli">CLI</a> page.</p>
<p>When you <code>init</code> a new project it will automatically run <code>translation:install</code> and <code>translation:extract</code>, so your local translatiions in <code>src/i18n/lang</code> will be up to date.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-poeditor-as-a-developer-on-the-seasketch-team">Setup POEditor as a developer on the SeaSketch team<a href="#setup-poeditor-as-a-developer-on-the-seasketch-team" class="hash-link" aria-label="Direct link to Setup POEditor as a developer on the SeaSketch team" title="Direct link to Setup POEditor as a developer on the SeaSketch team">​</a></h3>
<ul>
<li>Create a new account in <a href="https://poeditor.com/" target="_blank" rel="noopener noreferrer">POEditor</a></li>
<li>Request an invite to the SeaSketch Reports project as an admin and verify you can access it.</li>
<li>Follow the instructions below to setup API credentials</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-poeditor-as-an-independent-developer">Setup POEditor As An Independent Developer<a href="#setup-poeditor-as-an-independent-developer" class="hash-link" aria-label="Direct link to Setup POEditor As An Independent Developer" title="Direct link to Setup POEditor As An Independent Developer">​</a></h3>
<ul>
<li>Create a new account in <a href="https://poeditor.com/" target="_blank" rel="noopener noreferrer">POEditor</a></li>
<li>Create a new project in POEditor</li>
<li>Request open source approval for project (unlocking unlimited free translations)<!-- -->
<ul>
<li>If your project is public and open source and you would like to unlock free translations you click dashboard -&gt; project name -&gt; Settings -&gt; Advanced -&gt; Open source project</li>
</ul>
</li>
<li>Follow the instructions below to setup API credentials</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-poeditor-api-credentials">Setup POEditor API credentials<a href="#setup-poeditor-api-credentials" class="hash-link" aria-label="Direct link to Setup POEditor API credentials" title="Direct link to Setup POEditor API credentials">​</a></h3>
<ul>
<li>Setup your API credentials<!-- -->
<ul>
<li>Click gear icon in top right -&gt; API Access in left sidebar</li>
<li>Note API token for your user</li>
<li>Note ID number for your project</li>
<li>Add credentials to your <code>.bashrc</code> file</li>
</ul>
</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export POEDITOR_PROJECT=[YOUR_PROJECT_ID_NUMBER]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export POEDITOR_API_TOKEN=[YOUR_API_TOKEN]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a href="/geoprocessing/docs/tipsandtricks#editing-your-startup-bash-script-in-ubuntu">How do I do that?</a></p>
<p>Now, verify the environment variables are set</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">source ~/.bashrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $POEDITOR_PROJECT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $POEDITOR_API_TOKEN</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="publishing-translations-to-poeditor">Publishing Translations to POEditor<a href="#publishing-translations-to-poeditor" class="hash-link" aria-label="Direct link to Publishing Translations to POEditor" title="Direct link to Publishing Translations to POEditor">​</a></h3>
<p>Then <code>npm run translation:publish</code> to push the new/edited english strings to POEditor. The strings will be tagged in POEditor with the name of the project e.g the context for yours will be (<code>fsm-reports-test</code>).</p>
<p><img decoding="async" loading="lazy" alt="POEditor Context" src="/geoprocessing/assets/images/PoeditorContext-877a556c0ecef5ea5005e77dc6a53d96.png" title="POEditor Context" width="1972" height="687" class="img_ev3q"></p>
<p>with Someone will then need to translate the strings using the POEditor service for each relevant language.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="importing-translations-from-poeditor">Importing Translations from POEditor<a href="#importing-translations-from-poeditor" class="hash-link" aria-label="Direct link to Importing Translations from POEditor" title="Direct link to Importing Translations from POEditor">​</a></h2>
<p>You will then need to run <code>npm run translation:import</code> to bring these translations back into the project. You should see files added/updated for each language code in <code>src/i18n/lang</code>.</p>
<p>Commit all translation files, including English and non-english, to the code repository. These will be bundled into your production app.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="managing-translations-locally">Managing Translations Locally<a href="#managing-translations-locally" class="hash-link" aria-label="Direct link to Managing Translations Locally" title="Direct link to Managing Translations Locally">​</a></h2>
<p>If you choose not to use POEditor then the easiest option is to maintain translations in your project code repository.</p>
<p>You will still use the <code>translation:extract</code> command to extract your strings.</p>
<p>You can then use the <a href="https://github.com/lokalise/i18n-ally" target="_blank" rel="noopener noreferrer">i18n-ally</a> vscode extension to manage your translations. Your project already includes vscode settings for using this extension in <code>.vscode/settings.json</code>. Read the extension documentation to learn how to use for example the auto-translation feature.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-translations">Deploying Translations<a href="#deploying-translations" class="hash-link" aria-label="Direct link to Deploying Translations" title="Direct link to Deploying Translations">​</a></h2>
<p>If your translations are working in storybook, then there is nothing more to do. Your translations in <code>src/i18n/lang</code> and the base translations used as a fallback in <code>src/i18n/baseLang</code> will be bundled automatically into your app and loaded asynchronously using the <code>Translator</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-new-languages">Adding New Languages<a href="#adding-new-languages" class="hash-link" aria-label="Direct link to Adding New Languages" title="Direct link to Adding New Languages">​</a></h2>
<p>If your project needs to add a new language that is not already supported, follow these steps:</p>
<ul>
<li>Add the new language to <code>src/i18n/supported.ts</code>. The language code should match what <a href="https://github.com/seasketch/next/blob/master/packages/client/src/lang/supported.ts" target="_blank" rel="noopener noreferrer">SeaSketch uses</a>.</li>
<li>Add the language in your POEditor project. Make sure the language code matches what SeaSketch Next is using, and what you have in supported.ts</li>
<li>Translate the strings in POEditor to the new language.</li>
<li>On your next run of <code>translation:import</code> a folder for the language will be added to <code>src/i18n/lang</code> and include a <code>translation.json</code> file with the strings that you translated in POEditor.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-report-translations">Test report translations<a href="#test-report-translations" class="hash-link" aria-label="Direct link to Test report translations" title="Direct link to Test report translations">​</a></h2>
<p>When you run <code>storybook</code>, the story displayed will include a language switcher. If you created your project using a starter template, strings that are displayed in the user interface are already pre-translated and the top-level report client already includes a story with a <code>Translator</code> component. You should be able to change the language and the interface will update for all supported languages.</p>
<p><img decoding="async" loading="lazy" alt="Language Switcher" src="/geoprocessing/assets/images/StoryTranslation-4885b06cfc9eebc50a7a847e5034c720.png" title="Language Switcher" width="992" height="1098" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="making-report-strings-translatable">Making Report Strings Translatable<a href="#making-report-strings-translatable" class="hash-link" aria-label="Direct link to Making Report Strings Translatable" title="Direct link to Making Report Strings Translatable">​</a></h2>
<p>Once you start adding and customizing your reports, you will need to translate any new strings you introduce to be displayed in the user interface. To do this, you need to use <a href="https://react.i18next.com/" target="_blank" rel="noopener noreferrer">react-i18next</a> to wrap those strings in a translator function call or <code>Trans</code> React component. Here are some examples:</p>
<p>Example of using <code>t()</code> function via <code>useTranslation</code> hook to translate a string:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> React </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> useTranslation </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react-i18next&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">TestComponent</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> t </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useTranslation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> displayString </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">t</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;This is a test&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">p</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">displayString</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">p</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example of using <code>Trans</code> component to translate a string interspersed with html tags, and with a dynamic value.</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> React </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Trans </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react-i18next&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">TestComponent</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> t </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useTranslation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">p</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        📐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Trans i18nKey</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;TestComponent - area message&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          This sketch </span><span class="token keyword" style="color:#00009f">is</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot; &quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">b</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> area</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Number</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">round</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">area </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1e-6</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">b</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> square</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          kilometers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">Trans</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">p</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Both <code>t()</code> and <code>Trans</code> can be used within the same file, whatever combination gets the job done. Notice that the <code>Trans</code> example includes an <code>i18nKey</code> property. This is useful for providing context for where this string is in the codebase, as you&#x27;ll soon see in the extracted strings. You can do the same thing with the <code>t</code> functions using <code>t(&#x27;myKey&#x27;, &#x27;stringValue&#x27;)</code>.</p>
<p>Once you&#x27;ve added new strings to your component or edited existing ones, and wrapped them in translation calls, you will then need to run <code>npm run translation:extract</code>. You should then see all new/changed english string updated in <code>src/i18n/lang/en/translation.json</code>. Here&#x27;s an example project and its <a href="https://github.com/seasketch/azores-nearshore-reports/blob/main/src/i18n/lang/en/translation.json" target="_blank" rel="noopener noreferrer">translations</a></p>
<p>Here is what should be the resulting extracted strings for translation:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token property" style="color:#36acaa">&quot;This is a test&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;This is a test&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token property" style="color:#36acaa">&quot;TestComponent - area message&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;This sketch is &lt;2&gt;{{area}}&lt;/2&gt; square kilometers&quot;</span><span class="token punctuation" style="color:#393A34">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Notice that the second string has a translation key (<code>&quot;TestComponent - area message&quot;</code>) that is different from its value. Also notice that <code>This is a test</code> has the same key and value for it&#x27;s translation pair. This is because we specified an <code>i18nkey</code> in the <code>Trans</code> component, and we didn&#x27;t specify a key for the <code>t()</code> example, but we could have using <code>t(&quot;myKey&quot;, &quot;myValue&quot;)</code>.</p>
<p>The benefit of not specifying a key and letting it be the same as the value is that anywhere you translate this same string in your codebase, they will all use one translation. If you specify a different key for every time you translate the same string, you will have to translate each one, causing some duplicate work for your translator. But the benefit of specifying a key is that it can give you context for where the string is used in your code. Based on this behavior, the recommended best practice is:</p>
<ul>
<li>If you have a string that is likely to be reused across your reports (think &quot;metric&quot;, &quot;protected area&quot; or &quot;planning area&quot;) then don&#x27;t include a key when you wrap it in a translation.</li>
<li>Andy if you have strings that you know are very specific to your report, usually sentences or paragraphs, then you can include a key to help with grouping your strings in your translation file. One method is to use the name of the component in the key and then a short bit about what the string is you&#x27;re translating. (e.g. <code>SizeCard - learn more</code>)</li>
</ul>
<p><code>react-i18n</code> includes much more <a href="https://react.i18next.com/latest/using-with-hooks" target="_blank" rel="noopener noreferrer">advanced capabilities</a> for translating complex strings, and you should use them as needed. This includes the use of <code>i18n</code> namespaces, which this framework has specifically chosen <em><code>not</code></em> to use for simplicity to the user.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="making-stories-translatable">Making Stories Translatable<a href="#making-stories-translatable" class="hash-link" aria-label="Direct link to Making Stories Translatable" title="Direct link to Making Stories Translatable">​</a></h2>
<p>Storybook includes a language switcher for testing out your translations, you just need to add a couple of pieces to your stories to make use of it. Any report client installed with the starter template will already include these pieces and you can refer to them. That said, in order for the storybook language switcher to work you need to:</p>
<ul>
<li>Wrap your story in a Translator, unless the component you&#x27;re writing a story for already has its own Translator (e.g. report clients).</li>
<li>Export your story component using a <code>ReportDecorator</code></li>
<li>Or if you want to override parts of the default ReportContext value used by the story you should export your story using <code>createReportDecorator()</code> instead.</li>
</ul>
<p>Example story using default context:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> React </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TestTable </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;../TestTable&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> ReportDecorator </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;../storybook/ReportDecorator&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Translator </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;../i18n/TranslatorAsync&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">basic</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Translator</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">TestTable </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">Translator</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  component</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> TestTable</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Components/TestTable&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  decorators</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ReportDecorator</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example story overriding parts of report context with:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> React </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> SizeCard </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./SizeCard&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  createReportDecorator</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sampleSketchReportContextValue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@seasketch/geoprocessing/client-ui&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Translator </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;../components/TranslatorAsync&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> contextValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sampleSketchReportContextValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  visibleLayers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  exampleOutputs</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      functionName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;boundaryAreaOverlap&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      sketchName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;My Sketch&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      results</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metrics</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            metricId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;boundaryAreaOverlap&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sketchId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;abc123&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            classId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;eez&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            groupId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            geographyId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            value</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">75066892447.21024</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            extra</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              sketchName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;fsm-east-west-sketch&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sketch</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Feature&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          properties</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;fsm-east-west-sketch&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            updatedAt</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-11-17T10:02:53.645Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sketchClassId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;123abc&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;abc123&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          geometry</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Wrap in Translator to allow translations to work in storybook without report client</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">basic</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Translator</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">SizeCard </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">Translator</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  component</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> SizeCard</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Project/Components/SizeCard&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  decorators</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">createReportDecorator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">contextValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/seasketch/geoprocessing/tree/main/website/templates/shared/docs/gip/GIP-1-i18n.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/geoprocessing/docs/api/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Typescript API</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/geoprocessing/docs/limits"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Edge Cases &amp; Limits</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#need" class="table-of-contents__link toc-highlight">Need</a></li><li><a href="#glossary" class="table-of-contents__link toc-highlight">Glossary</a></li><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#implementation" class="table-of-contents__link toc-highlight">Implementation</a><ul><li><a href="#translations-within-library-templates" class="table-of-contents__link toc-highlight">Translations Within Library Templates</a></li></ul></li><li><a href="#client-side-language-load-and-switch" class="table-of-contents__link toc-highlight">Client-side language load and switch</a></li><li><a href="#storybook" class="table-of-contents__link toc-highlight">Storybook</a></li><li><a href="#report-development-use-cases" class="table-of-contents__link toc-highlight">Report development use cases</a><ul><li><a href="#for-all-report-development-use-cases" class="table-of-contents__link toc-highlight">For all report development use cases</a></li><li><a href="#1-reports-developed-by-seasketch-team-using-poeditor" class="table-of-contents__link toc-highlight">1. Reports developed by SeaSketch Team using POEDITOR</a></li><li><a href="#2-reports-developed-by-external-developer-using-poeditor" class="table-of-contents__link toc-highlight">2. Reports developed by external developer using POEDITOR</a></li><li><a href="#3-reports-developed-by-external-developer-not-using-poeditor-but-in-local-repo" class="table-of-contents__link toc-highlight">3. Reports developed by external developer not using POEDITOR but in local repo</a></li></ul></li><li><a href="#language-translation-tutorial" class="table-of-contents__link toc-highlight">Language Translation Tutorial</a></li><li><a href="#managing-translations-using-poeditor" class="table-of-contents__link toc-highlight">Managing Translations Using POEditor</a><ul><li><a href="#setup-poeditor-as-a-developer-on-the-seasketch-team" class="table-of-contents__link toc-highlight">Setup POEditor as a developer on the SeaSketch team</a></li><li><a href="#setup-poeditor-as-an-independent-developer" class="table-of-contents__link toc-highlight">Setup POEditor As An Independent Developer</a></li><li><a href="#setup-poeditor-api-credentials" class="table-of-contents__link toc-highlight">Setup POEditor API credentials</a></li><li><a href="#publishing-translations-to-poeditor" class="table-of-contents__link toc-highlight">Publishing Translations to POEditor</a></li></ul></li><li><a href="#importing-translations-from-poeditor" class="table-of-contents__link toc-highlight">Importing Translations from POEditor</a></li><li><a href="#managing-translations-locally" class="table-of-contents__link toc-highlight">Managing Translations Locally</a></li><li><a href="#deploying-translations" class="table-of-contents__link toc-highlight">Deploying Translations</a></li><li><a href="#adding-new-languages" class="table-of-contents__link toc-highlight">Adding New Languages</a></li><li><a href="#test-report-translations" class="table-of-contents__link toc-highlight">Test report translations</a></li><li><a href="#making-report-strings-translatable" class="table-of-contents__link toc-highlight">Making Report Strings Translatable</a></li><li><a href="#making-stories-translatable" class="table-of-contents__link toc-highlight">Making Stories Translatable</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/geoprocessing/docs">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/geoprocessing/docs/api">Typescript API</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://seasketch.github.io/geoprocessing/storybook/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">UI Component Library<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/seasketch/geoprocessing" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://seasketch.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">SeaSketch<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/seasketch/next" target="_blank" rel="noopener noreferrer" class="footer__link-item">SeaSketch GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 The Regents of the University of California.</div></div></div></footer></div>
</body>
</html>