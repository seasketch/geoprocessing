import{j as G}from"./jsx-runtime-qGIIFXMu.js";import{a as Er,c as ie,g as Sr,r as V}from"./index-CDs2tPxN.js";import{D as Rr}from"./Dropdown-tcPmk1CW.js";import{a as Tr}from"./SimpleButton-DMpLUrh0.js";import{p as Or}from"./styled-components.browser.esm-Bui9LJgA.js";import{g as dt}from"./index-BbP3371Q.js";import{d as Lr}from"./index-BKD8Dact.js";import{u as It,i as oe}from"./util-C2ce4qgt.js";import{p as k}from"./index-BAMY2Nnw.js";import{u as Ar}from"./useSketchProperties-CFXDSTtm.js";import{_ as Ft}from"./extends-CF3RwP-h.js";import{S as Ut}from"./index.esm-2eyhaxSG.js";import{u as xr}from"./useTranslation-BpTe-nno.js";var tt={exports:{}},ne=typeof Reflect=="object"?Reflect:null,ht=ne&&typeof ne.apply=="function"?ne.apply:function(t,r,a){return Function.prototype.apply.call(t,r,a)},be;ne&&typeof ne.ownKeys=="function"?be=ne.ownKeys:Object.getOwnPropertySymbols?be=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:be=function(t){return Object.getOwnPropertyNames(t)};function Nr(e){console&&console.warn&&console.warn(e)}var Wt=Number.isNaN||function(t){return t!==t};function q(){q.init.call(this)}tt.exports=q;tt.exports.once=Dr;q.EventEmitter=q;q.prototype._events=void 0;q.prototype._eventsCount=0;q.prototype._maxListeners=void 0;var pt=10;function me(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(q,"defaultMaxListeners",{enumerable:!0,get:function(){return pt},set:function(e){if(typeof e!="number"||e<0||Wt(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");pt=e}});q.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};q.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Wt(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Ht(e){return e._maxListeners===void 0?q.defaultMaxListeners:e._maxListeners}q.prototype.getMaxListeners=function(){return Ht(this)};q.prototype.emit=function(t){for(var r=[],a=1;a<arguments.length;a++)r.push(arguments[a]);var s=t==="error",f=this._events;if(f!==void 0)s=s&&f.error===void 0;else if(!s)return!1;if(s){var u;if(r.length>0&&(u=r[0]),u instanceof Error)throw u;var c=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw c.context=u,c}var l=f[t];if(l===void 0)return!1;if(typeof l=="function")ht(l,this,r);else for(var p=l.length,b=Kt(l,p),a=0;a<p;++a)ht(b[a],this,r);return!0};function Vt(e,t,r,a){var s,f,u;if(me(r),f=e._events,f===void 0?(f=e._events=Object.create(null),e._eventsCount=0):(f.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),f=e._events),u=f[t]),u===void 0)u=f[t]=r,++e._eventsCount;else if(typeof u=="function"?u=f[t]=a?[r,u]:[u,r]:a?u.unshift(r):u.push(r),s=Ht(e),s>0&&u.length>s&&!u.warned){u.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=u.length,Nr(c)}return e}q.prototype.addListener=function(t,r){return Vt(this,t,r,!1)};q.prototype.on=q.prototype.addListener;q.prototype.prependListener=function(t,r){return Vt(this,t,r,!0)};function Mr(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function $t(e,t,r){var a={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},s=Mr.bind(a);return s.listener=r,a.wrapFn=s,s}q.prototype.once=function(t,r){return me(r),this.on(t,$t(this,t,r)),this};q.prototype.prependOnceListener=function(t,r){return me(r),this.prependListener(t,$t(this,t,r)),this};q.prototype.removeListener=function(t,r){var a,s,f,u,c;if(me(r),s=this._events,s===void 0)return this;if(a=s[t],a===void 0)return this;if(a===r||a.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,a.listener||r));else if(typeof a!="function"){for(f=-1,u=a.length-1;u>=0;u--)if(a[u]===r||a[u].listener===r){c=a[u].listener,f=u;break}if(f<0)return this;f===0?a.shift():Cr(a,f),a.length===1&&(s[t]=a[0]),s.removeListener!==void 0&&this.emit("removeListener",t,c||r)}return this};q.prototype.off=q.prototype.removeListener;q.prototype.removeAllListeners=function(t){var r,a,s;if(a=this._events,a===void 0)return this;if(a.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):a[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete a[t]),this;if(arguments.length===0){var f=Object.keys(a),u;for(s=0;s<f.length;++s)u=f[s],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=a[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(t,r[s]);return this};function Gt(e,t,r){var a=e._events;if(a===void 0)return[];var s=a[t];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?Pr(s):Kt(s,s.length)}q.prototype.listeners=function(t){return Gt(this,t,!0)};q.prototype.rawListeners=function(t){return Gt(this,t,!1)};q.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Jt.call(e,t)};q.prototype.listenerCount=Jt;function Jt(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}q.prototype.eventNames=function(){return this._eventsCount>0?be(this._events):[]};function Kt(e,t){for(var r=new Array(t),a=0;a<t;++a)r[a]=e[a];return r}function Cr(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Pr(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function Dr(e,t){return new Promise(function(r,a){function s(u){e.removeListener(t,f),a(u)}function f(){typeof e.removeListener=="function"&&e.removeListener("error",s),r([].slice.call(arguments))}Yt(e,t,f,{once:!0}),t!=="error"&&jr(e,s,{once:!0})})}function jr(e,t,r){typeof e.on=="function"&&Yt(e,"error",t,r)}function Yt(e,t,r,a){if(typeof e.on=="function")a.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function s(f){a.once&&e.removeEventListener(t,s),r(f)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var rt=tt.exports,De,yt;function zt(){return yt||(yt=1,De=rt.EventEmitter),De}const Ee=Er(Lr);var je,vt;function qr(){if(vt)return je;vt=1;function e(R,T){var m=Object.keys(R);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(R);T&&(o=o.filter(function(y){return Object.getOwnPropertyDescriptor(R,y).enumerable})),m.push.apply(m,o)}return m}function t(R){for(var T=1;T<arguments.length;T++){var m=arguments[T]!=null?arguments[T]:{};T%2?e(Object(m),!0).forEach(function(o){r(R,o,m[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(m)):e(Object(m)).forEach(function(o){Object.defineProperty(R,o,Object.getOwnPropertyDescriptor(m,o))})}return R}function r(R,T,m){return T=u(T),T in R?Object.defineProperty(R,T,{value:m,enumerable:!0,configurable:!0,writable:!0}):R[T]=m,R}function a(R,T){if(!(R instanceof T))throw new TypeError("Cannot call a class as a function")}function s(R,T){for(var m=0;m<T.length;m++){var o=T[m];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(R,u(o.key),o)}}function f(R,T,m){return T&&s(R.prototype,T),Object.defineProperty(R,"prototype",{writable:!1}),R}function u(R){var T=c(R,"string");return typeof T=="symbol"?T:String(T)}function c(R,T){if(typeof R!="object"||R===null)return R;var m=R[Symbol.toPrimitive];if(m!==void 0){var o=m.call(R,T||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(R)}var l=Ee,p=l.Buffer,b=It,E=b.inspect,w=E&&E.custom||"inspect";function A(R,T,m){p.prototype.copy.call(R,T,m)}return je=function(){function R(){a(this,R),this.head=null,this.tail=null,this.length=0}return f(R,[{key:"push",value:function(m){var o={data:m,next:null};this.length>0?this.tail.next=o:this.head=o,this.tail=o,++this.length}},{key:"unshift",value:function(m){var o={data:m,next:this.head};this.length===0&&(this.tail=o),this.head=o,++this.length}},{key:"shift",value:function(){if(this.length!==0){var m=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,m}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(m){if(this.length===0)return"";for(var o=this.head,y=""+o.data;o=o.next;)y+=m+o.data;return y}},{key:"concat",value:function(m){if(this.length===0)return p.alloc(0);for(var o=p.allocUnsafe(m>>>0),y=this.head,g=0;y;)A(y.data,o,g),g+=y.data.length,y=y.next;return o}},{key:"consume",value:function(m,o){var y;return m<this.head.data.length?(y=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):m===this.head.data.length?y=this.shift():y=o?this._getString(m):this._getBuffer(m),y}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var o=this.head,y=1,g=o.data;for(m-=g.length;o=o.next;){var S=o.data,O=m>S.length?S.length:m;if(O===S.length?g+=S:g+=S.slice(0,m),m-=O,m===0){O===S.length?(++y,o.next?this.head=o.next:this.head=this.tail=null):(this.head=o,o.data=S.slice(O));break}++y}return this.length-=y,g}},{key:"_getBuffer",value:function(m){var o=p.allocUnsafe(m),y=this.head,g=1;for(y.data.copy(o),m-=y.data.length;y=y.next;){var S=y.data,O=m>S.length?S.length:m;if(S.copy(o,o.length-m,0,O),m-=O,m===0){O===S.length?(++g,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=S.slice(O));break}++g}return this.length-=g,o}},{key:w,value:function(m,o){return E(this,t(t({},o),{},{depth:0,customInspect:!1}))}}]),R}(),je}var qe,gt;function Qt(){if(gt)return qe;gt=1;function e(u,c){var l=this,p=this._readableState&&this._readableState.destroyed,b=this._writableState&&this._writableState.destroyed;return p||b?(c?c(u):u&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,k.nextTick(s,this,u)):k.nextTick(s,this,u)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(u||null,function(E){!c&&E?l._writableState?l._writableState.errorEmitted?k.nextTick(r,l):(l._writableState.errorEmitted=!0,k.nextTick(t,l,E)):k.nextTick(t,l,E):c?(k.nextTick(r,l),c(E)):k.nextTick(r,l)}),this)}function t(u,c){s(u,c),r(u)}function r(u){u._writableState&&!u._writableState.emitClose||u._readableState&&!u._readableState.emitClose||u.emit("close")}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(u,c){u.emit("error",c)}function f(u,c){var l=u._readableState,p=u._writableState;l&&l.autoDestroy||p&&p.autoDestroy?u.destroy(c):u.emit("error",c)}return qe={destroy:e,undestroy:a,errorOrDestroy:f},qe}var ke={},_t;function fe(){if(_t)return ke;_t=1;function e(c,l){c.prototype=Object.create(l.prototype),c.prototype.constructor=c,c.__proto__=l}var t={};function r(c,l,p){p||(p=Error);function b(w,A,R){return typeof l=="string"?l:l(w,A,R)}var E=function(w){e(A,w);function A(R,T,m){return w.call(this,b(R,T,m))||this}return A}(p);E.prototype.name=p.name,E.prototype.code=c,t[c]=E}function a(c,l){if(Array.isArray(c)){var p=c.length;return c=c.map(function(b){return String(b)}),p>2?"one of ".concat(l," ").concat(c.slice(0,p-1).join(", "),", or ")+c[p-1]:p===2?"one of ".concat(l," ").concat(c[0]," or ").concat(c[1]):"of ".concat(l," ").concat(c[0])}else return"of ".concat(l," ").concat(String(c))}function s(c,l,p){return c.substr(0,l.length)===l}function f(c,l,p){return(p===void 0||p>c.length)&&(p=c.length),c.substring(p-l.length,p)===l}function u(c,l,p){return typeof p!="number"&&(p=0),p+l.length>c.length?!1:c.indexOf(l,p)!==-1}return r("ERR_INVALID_OPT_VALUE",function(c,l){return'The value "'+l+'" is invalid for option "'+c+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(c,l,p){var b;typeof l=="string"&&s(l,"not ")?(b="must not be",l=l.replace(/^not /,"")):b="must be";var E;if(f(c," argument"))E="The ".concat(c," ").concat(b," ").concat(a(l,"type"));else{var w=u(c,".")?"property":"argument";E='The "'.concat(c,'" ').concat(w," ").concat(b," ").concat(a(l,"type"))}return E+=". Received type ".concat(typeof p),E},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(c){return"The "+c+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(c){return"Cannot call "+c+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(c){return"Unknown encoding: "+c},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ke.codes=t,ke}var Be,bt;function Xt(){if(bt)return Be;bt=1;var e=fe().codes.ERR_INVALID_OPT_VALUE;function t(a,s,f){return a.highWaterMark!=null?a.highWaterMark:s?a[f]:null}function r(a,s,f,u){var c=t(s,u,f);if(c!=null){if(!(isFinite(c)&&Math.floor(c)===c)||c<0){var l=u?f:"highWaterMark";throw new e(l,c)}return Math.floor(c)}return a.objectMode?16:16*1024}return Be={getHighWaterMark:r},Be}var Ie,wt;function kr(){if(wt)return Ie;wt=1,Ie=e;function e(r,a){if(t("noDeprecation"))return r;var s=!1;function f(){if(!s){if(t("throwDeprecation"))throw new Error(a);t("traceDeprecation")?console.trace(a):console.warn(a),s=!0}return r.apply(this,arguments)}return f}function t(r){try{if(!ie.localStorage)return!1}catch{return!1}var a=ie.localStorage[r];return a==null?!1:String(a).toLowerCase()==="true"}return Ie}var Fe,mt;function Zt(){if(mt)return Fe;mt=1,Fe=j;function e(h){var d=this;this.next=null,this.entry=null,this.finish=function(){Ne(d,h)}}var t;j.WritableState=N;var r={deprecate:kr()},a=zt(),s=Ee.Buffer,f=(typeof ie<"u"?ie:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function u(h){return s.from(h)}function c(h){return s.isBuffer(h)||h instanceof f}var l=Qt(),p=Xt(),b=p.getHighWaterMark,E=fe().codes,w=E.ERR_INVALID_ARG_TYPE,A=E.ERR_METHOD_NOT_IMPLEMENTED,R=E.ERR_MULTIPLE_CALLBACK,T=E.ERR_STREAM_CANNOT_PIPE,m=E.ERR_STREAM_DESTROYED,o=E.ERR_STREAM_NULL_VALUES,y=E.ERR_STREAM_WRITE_AFTER_END,g=E.ERR_UNKNOWN_ENCODING,S=l.errorOrDestroy;oe(j,a);function O(){}function N(h,d,_){t=t||ae(),h=h||{},typeof _!="boolean"&&(_=d instanceof t),this.objectMode=!!h.objectMode,_&&(this.objectMode=this.objectMode||!!h.writableObjectMode),this.highWaterMark=b(this,h,"writableHighWaterMark",_),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var x=h.decodeStrings===!1;this.decodeStrings=!x,this.defaultEncoding=h.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(P){Le(d,P)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=h.emitClose!==!1,this.autoDestroy=!!h.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}N.prototype.getBuffer=function(){for(var d=this.bufferedRequest,_=[];d;)_.push(d),d=d.next;return _},function(){try{Object.defineProperty(N.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var F;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(F=Function.prototype[Symbol.hasInstance],Object.defineProperty(j,Symbol.hasInstance,{value:function(d){return F.call(this,d)?!0:this!==j?!1:d&&d._writableState instanceof N}})):F=function(d){return d instanceof this};function j(h){t=t||ae();var d=this instanceof t;if(!d&&!F.call(j,this))return new j(h);this._writableState=new N(h,this,d),this.writable=!0,h&&(typeof h.write=="function"&&(this._write=h.write),typeof h.writev=="function"&&(this._writev=h.writev),typeof h.destroy=="function"&&(this._destroy=h.destroy),typeof h.final=="function"&&(this._final=h.final)),a.call(this)}j.prototype.pipe=function(){S(this,new T)};function M(h,d){var _=new y;S(h,_),k.nextTick(d,_)}function H(h,d,_,x){var P;return _===null?P=new o:typeof _!="string"&&!d.objectMode&&(P=new w("chunk",["string","Buffer"],_)),P?(S(h,P),k.nextTick(x,P),!1):!0}j.prototype.write=function(h,d,_){var x=this._writableState,P=!1,n=!x.objectMode&&c(h);return n&&!s.isBuffer(h)&&(h=u(h)),typeof d=="function"&&(_=d,d=null),n?d="buffer":d||(d=x.defaultEncoding),typeof _!="function"&&(_=O),x.ending?M(this,_):(n||H(this,x,h,_))&&(x.pendingcb++,P=Te(this,x,n,h,d,_)),P},j.prototype.cork=function(){this._writableState.corked++},j.prototype.uncork=function(){var h=this._writableState;h.corked&&(h.corked--,!h.writing&&!h.corked&&!h.bufferProcessing&&h.bufferedRequest&&Z(this,h))},j.prototype.setDefaultEncoding=function(d){if(typeof d=="string"&&(d=d.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((d+"").toLowerCase())>-1))throw new g(d);return this._writableState.defaultEncoding=d,this},Object.defineProperty(j.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ue(h,d,_){return!h.objectMode&&h.decodeStrings!==!1&&typeof d=="string"&&(d=s.from(d,_)),d}Object.defineProperty(j.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Te(h,d,_,x,P,n){if(!_){var i=ue(d,x,P);x!==i&&(_=!0,P="buffer",x=i)}var v=d.objectMode?1:x.length;d.length+=v;var L=d.length<d.highWaterMark;if(L||(d.needDrain=!0),d.writing||d.corked){var I=d.lastBufferedRequest;d.lastBufferedRequest={chunk:x,encoding:P,isBuf:_,callback:n,next:null},I?I.next=d.lastBufferedRequest:d.bufferedRequest=d.lastBufferedRequest,d.bufferedRequestCount+=1}else X(h,d,!1,v,x,P,n);return L}function X(h,d,_,x,P,n,i){d.writelen=x,d.writecb=i,d.writing=!0,d.sync=!0,d.destroyed?d.onwrite(new m("write")):_?h._writev(P,d.onwrite):h._write(P,n,d.onwrite),d.sync=!1}function Oe(h,d,_,x,P){--d.pendingcb,_?(k.nextTick(P,x),k.nextTick(Y,h,d),h._writableState.errorEmitted=!0,S(h,x)):(P(x),h._writableState.errorEmitted=!0,S(h,x),Y(h,d))}function de(h){h.writing=!1,h.writecb=null,h.length-=h.writelen,h.writelen=0}function Le(h,d){var _=h._writableState,x=_.sync,P=_.writecb;if(typeof P!="function")throw new R;if(de(_),d)Oe(h,_,x,d,P);else{var n=pe(_)||h.destroyed;!n&&!_.corked&&!_.bufferProcessing&&_.bufferedRequest&&Z(h,_),x?k.nextTick(K,h,_,n,P):K(h,_,n,P)}}function K(h,d,_,x){_||he(h,d),d.pendingcb--,x(),Y(h,d)}function he(h,d){d.length===0&&d.needDrain&&(d.needDrain=!1,h.emit("drain"))}function Z(h,d){d.bufferProcessing=!0;var _=d.bufferedRequest;if(h._writev&&_&&_.next){var x=d.bufferedRequestCount,P=new Array(x),n=d.corkedRequestsFree;n.entry=_;for(var i=0,v=!0;_;)P[i]=_,_.isBuf||(v=!1),_=_.next,i+=1;P.allBuffers=v,X(h,d,!0,d.length,P,"",n.finish),d.pendingcb++,d.lastBufferedRequest=null,n.next?(d.corkedRequestsFree=n.next,n.next=null):d.corkedRequestsFree=new e(d),d.bufferedRequestCount=0}else{for(;_;){var L=_.chunk,I=_.encoding,C=_.callback,B=d.objectMode?1:L.length;if(X(h,d,!1,B,L,I,C),_=_.next,d.bufferedRequestCount--,d.writing)break}_===null&&(d.lastBufferedRequest=null)}d.bufferedRequest=_,d.bufferProcessing=!1}j.prototype._write=function(h,d,_){_(new A("_write()"))},j.prototype._writev=null,j.prototype.end=function(h,d,_){var x=this._writableState;return typeof h=="function"?(_=h,h=null,d=null):typeof d=="function"&&(_=d,d=null),h!=null&&this.write(h,d),x.corked&&(x.corked=1,this.uncork()),x.ending||xe(this,x,_),this},Object.defineProperty(j.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function pe(h){return h.ending&&h.length===0&&h.bufferedRequest===null&&!h.finished&&!h.writing}function Ae(h,d){h._final(function(_){d.pendingcb--,_&&S(h,_),d.prefinished=!0,h.emit("prefinish"),Y(h,d)})}function ye(h,d){!d.prefinished&&!d.finalCalled&&(typeof h._final=="function"&&!d.destroyed?(d.pendingcb++,d.finalCalled=!0,k.nextTick(Ae,h,d)):(d.prefinished=!0,h.emit("prefinish")))}function Y(h,d){var _=pe(d);if(_&&(ye(h,d),d.pendingcb===0&&(d.finished=!0,h.emit("finish"),d.autoDestroy))){var x=h._readableState;(!x||x.autoDestroy&&x.endEmitted)&&h.destroy()}return _}function xe(h,d,_){d.ending=!0,Y(h,d),_&&(d.finished?k.nextTick(_):h.once("finish",_)),d.ended=!0,h.writable=!1}function Ne(h,d,_){var x=h.entry;for(h.entry=null;x;){var P=x.callback;d.pendingcb--,P(_),x=x.next}d.corkedRequestsFree.next=h}return Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(d){this._writableState&&(this._writableState.destroyed=d)}}),j.prototype.destroy=l.destroy,j.prototype._undestroy=l.undestroy,j.prototype._destroy=function(h,d){d(h)},Fe}var Ue,Et;function ae(){if(Et)return Ue;Et=1;var e=Object.keys||function(p){var b=[];for(var E in p)b.push(E);return b};Ue=u;var t=er(),r=Zt();oe(u,t);for(var a=e(r.prototype),s=0;s<a.length;s++){var f=a[s];u.prototype[f]||(u.prototype[f]=r.prototype[f])}function u(p){if(!(this instanceof u))return new u(p);t.call(this,p),r.call(this,p),this.allowHalfOpen=!0,p&&(p.readable===!1&&(this.readable=!1),p.writable===!1&&(this.writable=!1),p.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",c)))}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function c(){this._writableState.ended||k.nextTick(l,this)}function l(p){p.end()}return Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(b){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=b,this._writableState.destroyed=b)}}),Ue}var We={},ge={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var St;function Br(){return St||(St=1,function(e,t){var r=Ee,a=r.Buffer;function s(u,c){for(var l in u)c[l]=u[l]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=r:(s(r,t),t.Buffer=f);function f(u,c,l){return a(u,c,l)}f.prototype=Object.create(a.prototype),s(a,f),f.from=function(u,c,l){if(typeof u=="number")throw new TypeError("Argument must not be a number");return a(u,c,l)},f.alloc=function(u,c,l){if(typeof u!="number")throw new TypeError("Argument must be a number");var p=a(u);return c!==void 0?typeof l=="string"?p.fill(c,l):p.fill(c):p.fill(0),p},f.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return a(u)},f.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(u)}}(ge,ge.exports)),ge.exports}var Rt;function Tt(){if(Rt)return We;Rt=1;var e=Br().Buffer,t=e.isEncoding||function(o){switch(o=""+o,o&&o.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(o){if(!o)return"utf8";for(var y;;)switch(o){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return o;default:if(y)return;o=(""+o).toLowerCase(),y=!0}}function a(o){var y=r(o);if(typeof y!="string"&&(e.isEncoding===t||!t(o)))throw new Error("Unknown encoding: "+o);return y||o}We.StringDecoder=s;function s(o){this.encoding=a(o);var y;switch(this.encoding){case"utf16le":this.text=E,this.end=w,y=4;break;case"utf8":this.fillLast=l,y=4;break;case"base64":this.text=A,this.end=R,y=3;break;default:this.write=T,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(y)}s.prototype.write=function(o){if(o.length===0)return"";var y,g;if(this.lastNeed){if(y=this.fillLast(o),y===void 0)return"";g=this.lastNeed,this.lastNeed=0}else g=0;return g<o.length?y?y+this.text(o,g):this.text(o,g):y||""},s.prototype.end=b,s.prototype.text=p,s.prototype.fillLast=function(o){if(this.lastNeed<=o.length)return o.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);o.copy(this.lastChar,this.lastTotal-this.lastNeed,0,o.length),this.lastNeed-=o.length};function f(o){return o<=127?0:o>>5===6?2:o>>4===14?3:o>>3===30?4:o>>6===2?-1:-2}function u(o,y,g){var S=y.length-1;if(S<g)return 0;var O=f(y[S]);return O>=0?(O>0&&(o.lastNeed=O-1),O):--S<g||O===-2?0:(O=f(y[S]),O>=0?(O>0&&(o.lastNeed=O-2),O):--S<g||O===-2?0:(O=f(y[S]),O>=0?(O>0&&(O===2?O=0:o.lastNeed=O-3),O):0))}function c(o,y,g){if((y[0]&192)!==128)return o.lastNeed=0,"�";if(o.lastNeed>1&&y.length>1){if((y[1]&192)!==128)return o.lastNeed=1,"�";if(o.lastNeed>2&&y.length>2&&(y[2]&192)!==128)return o.lastNeed=2,"�"}}function l(o){var y=this.lastTotal-this.lastNeed,g=c(this,o);if(g!==void 0)return g;if(this.lastNeed<=o.length)return o.copy(this.lastChar,y,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);o.copy(this.lastChar,y,0,o.length),this.lastNeed-=o.length}function p(o,y){var g=u(this,o,y);if(!this.lastNeed)return o.toString("utf8",y);this.lastTotal=g;var S=o.length-(g-this.lastNeed);return o.copy(this.lastChar,0,S),o.toString("utf8",y,S)}function b(o){var y=o&&o.length?this.write(o):"";return this.lastNeed?y+"�":y}function E(o,y){if((o.length-y)%2===0){var g=o.toString("utf16le",y);if(g){var S=g.charCodeAt(g.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=o[o.length-2],this.lastChar[1]=o[o.length-1],g.slice(0,-1)}return g}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=o[o.length-1],o.toString("utf16le",y,o.length-1)}function w(o){var y=o&&o.length?this.write(o):"";if(this.lastNeed){var g=this.lastTotal-this.lastNeed;return y+this.lastChar.toString("utf16le",0,g)}return y}function A(o,y){var g=(o.length-y)%3;return g===0?o.toString("base64",y):(this.lastNeed=3-g,this.lastTotal=3,g===1?this.lastChar[0]=o[o.length-1]:(this.lastChar[0]=o[o.length-2],this.lastChar[1]=o[o.length-1]),o.toString("base64",y,o.length-g))}function R(o){var y=o&&o.length?this.write(o):"";return this.lastNeed?y+this.lastChar.toString("base64",0,3-this.lastNeed):y}function T(o){return o.toString(this.encoding)}function m(o){return o&&o.length?this.write(o):""}return We}var He,Ot;function nt(){if(Ot)return He;Ot=1;var e=fe().codes.ERR_STREAM_PREMATURE_CLOSE;function t(f){var u=!1;return function(){if(!u){u=!0;for(var c=arguments.length,l=new Array(c),p=0;p<c;p++)l[p]=arguments[p];f.apply(this,l)}}}function r(){}function a(f){return f.setHeader&&typeof f.abort=="function"}function s(f,u,c){if(typeof u=="function")return s(f,null,u);u||(u={}),c=t(c||r);var l=u.readable||u.readable!==!1&&f.readable,p=u.writable||u.writable!==!1&&f.writable,b=function(){f.writable||w()},E=f._writableState&&f._writableState.finished,w=function(){p=!1,E=!0,l||c.call(f)},A=f._readableState&&f._readableState.endEmitted,R=function(){l=!1,A=!0,p||c.call(f)},T=function(g){c.call(f,g)},m=function(){var g;if(l&&!A)return(!f._readableState||!f._readableState.ended)&&(g=new e),c.call(f,g);if(p&&!E)return(!f._writableState||!f._writableState.ended)&&(g=new e),c.call(f,g)},o=function(){f.req.on("finish",w)};return a(f)?(f.on("complete",w),f.on("abort",m),f.req?o():f.on("request",o)):p&&!f._writableState&&(f.on("end",b),f.on("close",b)),f.on("end",R),f.on("finish",w),u.error!==!1&&f.on("error",T),f.on("close",m),function(){f.removeListener("complete",w),f.removeListener("abort",m),f.removeListener("request",o),f.req&&f.req.removeListener("finish",w),f.removeListener("end",b),f.removeListener("close",b),f.removeListener("finish",w),f.removeListener("end",R),f.removeListener("error",T),f.removeListener("close",m)}}return He=s,He}var Ve,Lt;function Ir(){if(Lt)return Ve;Lt=1;var e;function t(g,S,O){return S=r(S),S in g?Object.defineProperty(g,S,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[S]=O,g}function r(g){var S=a(g,"string");return typeof S=="symbol"?S:String(S)}function a(g,S){if(typeof g!="object"||g===null)return g;var O=g[Symbol.toPrimitive];if(O!==void 0){var N=O.call(g,S||"default");if(typeof N!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(g)}var s=nt(),f=Symbol("lastResolve"),u=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),p=Symbol("lastPromise"),b=Symbol("handlePromise"),E=Symbol("stream");function w(g,S){return{value:g,done:S}}function A(g){var S=g[f];if(S!==null){var O=g[E].read();O!==null&&(g[p]=null,g[f]=null,g[u]=null,S(w(O,!1)))}}function R(g){k.nextTick(A,g)}function T(g,S){return function(O,N){g.then(function(){if(S[l]){O(w(void 0,!0));return}S[b](O,N)},N)}}var m=Object.getPrototypeOf(function(){}),o=Object.setPrototypeOf((e={get stream(){return this[E]},next:function(){var S=this,O=this[c];if(O!==null)return Promise.reject(O);if(this[l])return Promise.resolve(w(void 0,!0));if(this[E].destroyed)return new Promise(function(M,H){k.nextTick(function(){S[c]?H(S[c]):M(w(void 0,!0))})});var N=this[p],F;if(N)F=new Promise(T(N,this));else{var j=this[E].read();if(j!==null)return Promise.resolve(w(j,!1));F=new Promise(this[b])}return this[p]=F,F}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var S=this;return new Promise(function(O,N){S[E].destroy(null,function(F){if(F){N(F);return}O(w(void 0,!0))})})}),e),m),y=function(S){var O,N=Object.create(o,(O={},t(O,E,{value:S,writable:!0}),t(O,f,{value:null,writable:!0}),t(O,u,{value:null,writable:!0}),t(O,c,{value:null,writable:!0}),t(O,l,{value:S._readableState.endEmitted,writable:!0}),t(O,b,{value:function(j,M){var H=N[E].read();H?(N[p]=null,N[f]=null,N[u]=null,j(w(H,!1))):(N[f]=j,N[u]=M)},writable:!0}),O));return N[p]=null,s(S,function(F){if(F&&F.code!=="ERR_STREAM_PREMATURE_CLOSE"){var j=N[u];j!==null&&(N[p]=null,N[f]=null,N[u]=null,j(F)),N[c]=F;return}var M=N[f];M!==null&&(N[p]=null,N[f]=null,N[u]=null,M(w(void 0,!0))),N[l]=!0}),S.on("readable",R.bind(null,N)),N};return Ve=y,Ve}var $e,At;function Fr(){return At||(At=1,$e=function(){throw new Error("Readable.from is not available in the browser")}),$e}var Ge,xt;function er(){if(xt)return Ge;xt=1,Ge=M;var e;M.ReadableState=j,rt.EventEmitter;var t=function(i,v){return i.listeners(v).length},r=zt(),a=Ee.Buffer,s=(typeof ie<"u"?ie:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(n){return a.from(n)}function u(n){return a.isBuffer(n)||n instanceof s}var c=It,l;c&&c.debuglog?l=c.debuglog("stream"):l=function(){};var p=qr(),b=Qt(),E=Xt(),w=E.getHighWaterMark,A=fe().codes,R=A.ERR_INVALID_ARG_TYPE,T=A.ERR_STREAM_PUSH_AFTER_EOF,m=A.ERR_METHOD_NOT_IMPLEMENTED,o=A.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,y,g,S;oe(M,r);var O=b.errorOrDestroy,N=["error","close","destroy","pause","resume"];function F(n,i,v){if(typeof n.prependListener=="function")return n.prependListener(i,v);!n._events||!n._events[i]?n.on(i,v):Array.isArray(n._events[i])?n._events[i].unshift(v):n._events[i]=[v,n._events[i]]}function j(n,i,v){e=e||ae(),n=n||{},typeof v!="boolean"&&(v=i instanceof e),this.objectMode=!!n.objectMode,v&&(this.objectMode=this.objectMode||!!n.readableObjectMode),this.highWaterMark=w(this,n,"readableHighWaterMark",v),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=n.emitClose!==!1,this.autoDestroy=!!n.autoDestroy,this.destroyed=!1,this.defaultEncoding=n.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,n.encoding&&(y||(y=Tt().StringDecoder),this.decoder=new y(n.encoding),this.encoding=n.encoding)}function M(n){if(e=e||ae(),!(this instanceof M))return new M(n);var i=this instanceof e;this._readableState=new j(n,this,i),this.readable=!0,n&&(typeof n.read=="function"&&(this._read=n.read),typeof n.destroy=="function"&&(this._destroy=n.destroy)),r.call(this)}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(i){this._readableState&&(this._readableState.destroyed=i)}}),M.prototype.destroy=b.destroy,M.prototype._undestroy=b.undestroy,M.prototype._destroy=function(n,i){i(n)},M.prototype.push=function(n,i){var v=this._readableState,L;return v.objectMode?L=!0:typeof n=="string"&&(i=i||v.defaultEncoding,i!==v.encoding&&(n=a.from(n,i),i=""),L=!0),H(this,n,i,!1,L)},M.prototype.unshift=function(n){return H(this,n,null,!0,!1)};function H(n,i,v,L,I){l("readableAddChunk",i);var C=n._readableState;if(i===null)C.reading=!1,Le(n,C);else{var B;if(I||(B=Te(C,i)),B)O(n,B);else if(C.objectMode||i&&i.length>0)if(typeof i!="string"&&!C.objectMode&&Object.getPrototypeOf(i)!==a.prototype&&(i=f(i)),L)C.endEmitted?O(n,new o):ue(n,C,i,!0);else if(C.ended)O(n,new T);else{if(C.destroyed)return!1;C.reading=!1,C.decoder&&!v?(i=C.decoder.write(i),C.objectMode||i.length!==0?ue(n,C,i,!1):Z(n,C)):ue(n,C,i,!1)}else L||(C.reading=!1,Z(n,C))}return!C.ended&&(C.length<C.highWaterMark||C.length===0)}function ue(n,i,v,L){i.flowing&&i.length===0&&!i.sync?(i.awaitDrain=0,n.emit("data",v)):(i.length+=i.objectMode?1:v.length,L?i.buffer.unshift(v):i.buffer.push(v),i.needReadable&&K(n)),Z(n,i)}function Te(n,i){var v;return!u(i)&&typeof i!="string"&&i!==void 0&&!n.objectMode&&(v=new R("chunk",["string","Buffer","Uint8Array"],i)),v}M.prototype.isPaused=function(){return this._readableState.flowing===!1},M.prototype.setEncoding=function(n){y||(y=Tt().StringDecoder);var i=new y(n);this._readableState.decoder=i,this._readableState.encoding=this._readableState.decoder.encoding;for(var v=this._readableState.buffer.head,L="";v!==null;)L+=i.write(v.data),v=v.next;return this._readableState.buffer.clear(),L!==""&&this._readableState.buffer.push(L),this._readableState.length=L.length,this};var X=1073741824;function Oe(n){return n>=X?n=X:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}function de(n,i){return n<=0||i.length===0&&i.ended?0:i.objectMode?1:n!==n?i.flowing&&i.length?i.buffer.head.data.length:i.length:(n>i.highWaterMark&&(i.highWaterMark=Oe(n)),n<=i.length?n:i.ended?i.length:(i.needReadable=!0,0))}M.prototype.read=function(n){l("read",n),n=parseInt(n,10);var i=this._readableState,v=n;if(n!==0&&(i.emittedReadable=!1),n===0&&i.needReadable&&((i.highWaterMark!==0?i.length>=i.highWaterMark:i.length>0)||i.ended))return l("read: emitReadable",i.length,i.ended),i.length===0&&i.ended?_(this):K(this),null;if(n=de(n,i),n===0&&i.ended)return i.length===0&&_(this),null;var L=i.needReadable;l("need readable",L),(i.length===0||i.length-n<i.highWaterMark)&&(L=!0,l("length less than watermark",L)),i.ended||i.reading?(L=!1,l("reading or ended",L)):L&&(l("do read"),i.reading=!0,i.sync=!0,i.length===0&&(i.needReadable=!0),this._read(i.highWaterMark),i.sync=!1,i.reading||(n=de(v,i)));var I;return n>0?I=d(n,i):I=null,I===null?(i.needReadable=i.length<=i.highWaterMark,n=0):(i.length-=n,i.awaitDrain=0),i.length===0&&(i.ended||(i.needReadable=!0),v!==n&&i.ended&&_(this)),I!==null&&this.emit("data",I),I};function Le(n,i){if(l("onEofChunk"),!i.ended){if(i.decoder){var v=i.decoder.end();v&&v.length&&(i.buffer.push(v),i.length+=i.objectMode?1:v.length)}i.ended=!0,i.sync?K(n):(i.needReadable=!1,i.emittedReadable||(i.emittedReadable=!0,he(n)))}}function K(n){var i=n._readableState;l("emitReadable",i.needReadable,i.emittedReadable),i.needReadable=!1,i.emittedReadable||(l("emitReadable",i.flowing),i.emittedReadable=!0,k.nextTick(he,n))}function he(n){var i=n._readableState;l("emitReadable_",i.destroyed,i.length,i.ended),!i.destroyed&&(i.length||i.ended)&&(n.emit("readable"),i.emittedReadable=!1),i.needReadable=!i.flowing&&!i.ended&&i.length<=i.highWaterMark,h(n)}function Z(n,i){i.readingMore||(i.readingMore=!0,k.nextTick(pe,n,i))}function pe(n,i){for(;!i.reading&&!i.ended&&(i.length<i.highWaterMark||i.flowing&&i.length===0);){var v=i.length;if(l("maybeReadMore read 0"),n.read(0),v===i.length)break}i.readingMore=!1}M.prototype._read=function(n){O(this,new m("_read()"))},M.prototype.pipe=function(n,i){var v=this,L=this._readableState;switch(L.pipesCount){case 0:L.pipes=n;break;case 1:L.pipes=[L.pipes,n];break;default:L.pipes.push(n);break}L.pipesCount+=1,l("pipe count=%d opts=%j",L.pipesCount,i);var I=(!i||i.end!==!1)&&n!==k.stdout&&n!==k.stderr,C=I?ee:le;L.endEmitted?k.nextTick(C):v.once("end",C),n.on("unpipe",B);function B(te,re){l("onunpipe"),te===v&&re&&re.hasUnpiped===!1&&(re.hasUnpiped=!0,mr())}function ee(){l("onend"),n.end()}var ve=Ae(v);n.on("drain",ve);var lt=!1;function mr(){l("cleanup"),n.removeListener("close",Ce),n.removeListener("finish",Pe),n.removeListener("drain",ve),n.removeListener("error",Me),n.removeListener("unpipe",B),v.removeListener("end",ee),v.removeListener("end",le),v.removeListener("data",ct),lt=!0,L.awaitDrain&&(!n._writableState||n._writableState.needDrain)&&ve()}v.on("data",ct);function ct(te){l("ondata");var re=n.write(te);l("dest.write",re),re===!1&&((L.pipesCount===1&&L.pipes===n||L.pipesCount>1&&P(L.pipes,n)!==-1)&&!lt&&(l("false write response, pause",L.awaitDrain),L.awaitDrain++),v.pause())}function Me(te){l("onerror",te),le(),n.removeListener("error",Me),t(n,"error")===0&&O(n,te)}F(n,"error",Me);function Ce(){n.removeListener("finish",Pe),le()}n.once("close",Ce);function Pe(){l("onfinish"),n.removeListener("close",Ce),le()}n.once("finish",Pe);function le(){l("unpipe"),v.unpipe(n)}return n.emit("pipe",v),L.flowing||(l("pipe resume"),v.resume()),n};function Ae(n){return function(){var v=n._readableState;l("pipeOnDrain",v.awaitDrain),v.awaitDrain&&v.awaitDrain--,v.awaitDrain===0&&t(n,"data")&&(v.flowing=!0,h(n))}}M.prototype.unpipe=function(n){var i=this._readableState,v={hasUnpiped:!1};if(i.pipesCount===0)return this;if(i.pipesCount===1)return n&&n!==i.pipes?this:(n||(n=i.pipes),i.pipes=null,i.pipesCount=0,i.flowing=!1,n&&n.emit("unpipe",this,v),this);if(!n){var L=i.pipes,I=i.pipesCount;i.pipes=null,i.pipesCount=0,i.flowing=!1;for(var C=0;C<I;C++)L[C].emit("unpipe",this,{hasUnpiped:!1});return this}var B=P(i.pipes,n);return B===-1?this:(i.pipes.splice(B,1),i.pipesCount-=1,i.pipesCount===1&&(i.pipes=i.pipes[0]),n.emit("unpipe",this,v),this)},M.prototype.on=function(n,i){var v=r.prototype.on.call(this,n,i),L=this._readableState;return n==="data"?(L.readableListening=this.listenerCount("readable")>0,L.flowing!==!1&&this.resume()):n==="readable"&&!L.endEmitted&&!L.readableListening&&(L.readableListening=L.needReadable=!0,L.flowing=!1,L.emittedReadable=!1,l("on readable",L.length,L.reading),L.length?K(this):L.reading||k.nextTick(Y,this)),v},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(n,i){var v=r.prototype.removeListener.call(this,n,i);return n==="readable"&&k.nextTick(ye,this),v},M.prototype.removeAllListeners=function(n){var i=r.prototype.removeAllListeners.apply(this,arguments);return(n==="readable"||n===void 0)&&k.nextTick(ye,this),i};function ye(n){var i=n._readableState;i.readableListening=n.listenerCount("readable")>0,i.resumeScheduled&&!i.paused?i.flowing=!0:n.listenerCount("data")>0&&n.resume()}function Y(n){l("readable nexttick read 0"),n.read(0)}M.prototype.resume=function(){var n=this._readableState;return n.flowing||(l("resume"),n.flowing=!n.readableListening,xe(this,n)),n.paused=!1,this};function xe(n,i){i.resumeScheduled||(i.resumeScheduled=!0,k.nextTick(Ne,n,i))}function Ne(n,i){l("resume",i.reading),i.reading||n.read(0),i.resumeScheduled=!1,n.emit("resume"),h(n),i.flowing&&!i.reading&&n.read(0)}M.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function h(n){var i=n._readableState;for(l("flow",i.flowing);i.flowing&&n.read()!==null;);}M.prototype.wrap=function(n){var i=this,v=this._readableState,L=!1;n.on("end",function(){if(l("wrapped end"),v.decoder&&!v.ended){var B=v.decoder.end();B&&B.length&&i.push(B)}i.push(null)}),n.on("data",function(B){if(l("wrapped data"),v.decoder&&(B=v.decoder.write(B)),!(v.objectMode&&B==null)&&!(!v.objectMode&&(!B||!B.length))){var ee=i.push(B);ee||(L=!0,n.pause())}});for(var I in n)this[I]===void 0&&typeof n[I]=="function"&&(this[I]=function(ee){return function(){return n[ee].apply(n,arguments)}}(I));for(var C=0;C<N.length;C++)n.on(N[C],this.emit.bind(this,N[C]));return this._read=function(B){l("wrapped _read",B),L&&(L=!1,n.resume())},this},typeof Symbol=="function"&&(M.prototype[Symbol.asyncIterator]=function(){return g===void 0&&(g=Ir()),g(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(i){this._readableState&&(this._readableState.flowing=i)}}),M._fromList=d,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function d(n,i){if(i.length===0)return null;var v;return i.objectMode?v=i.buffer.shift():!n||n>=i.length?(i.decoder?v=i.buffer.join(""):i.buffer.length===1?v=i.buffer.first():v=i.buffer.concat(i.length),i.buffer.clear()):v=i.buffer.consume(n,i.decoder),v}function _(n){var i=n._readableState;l("endReadable",i.endEmitted),i.endEmitted||(i.ended=!0,k.nextTick(x,i,n))}function x(n,i){if(l("endReadableNT",n.endEmitted,n.length),!n.endEmitted&&n.length===0&&(n.endEmitted=!0,i.readable=!1,i.emit("end"),n.autoDestroy)){var v=i._writableState;(!v||v.autoDestroy&&v.finished)&&i.destroy()}}typeof Symbol=="function"&&(M.from=function(n,i){return S===void 0&&(S=Fr()),S(M,n,i)});function P(n,i){for(var v=0,L=n.length;v<L;v++)if(n[v]===i)return v;return-1}return Ge}var Je,Nt;function tr(){if(Nt)return Je;Nt=1,Je=c;var e=fe().codes,t=e.ERR_METHOD_NOT_IMPLEMENTED,r=e.ERR_MULTIPLE_CALLBACK,a=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=e.ERR_TRANSFORM_WITH_LENGTH_0,f=ae();oe(c,f);function u(b,E){var w=this._transformState;w.transforming=!1;var A=w.writecb;if(A===null)return this.emit("error",new r);w.writechunk=null,w.writecb=null,E!=null&&this.push(E),A(b);var R=this._readableState;R.reading=!1,(R.needReadable||R.length<R.highWaterMark)&&this._read(R.highWaterMark)}function c(b){if(!(this instanceof c))return new c(b);f.call(this,b),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,b&&(typeof b.transform=="function"&&(this._transform=b.transform),typeof b.flush=="function"&&(this._flush=b.flush)),this.on("prefinish",l)}function l(){var b=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(E,w){p(b,E,w)}):p(this,null,null)}c.prototype.push=function(b,E){return this._transformState.needTransform=!1,f.prototype.push.call(this,b,E)},c.prototype._transform=function(b,E,w){w(new t("_transform()"))},c.prototype._write=function(b,E,w){var A=this._transformState;if(A.writecb=w,A.writechunk=b,A.writeencoding=E,!A.transforming){var R=this._readableState;(A.needTransform||R.needReadable||R.length<R.highWaterMark)&&this._read(R.highWaterMark)}},c.prototype._read=function(b){var E=this._transformState;E.writechunk!==null&&!E.transforming?(E.transforming=!0,this._transform(E.writechunk,E.writeencoding,E.afterTransform)):E.needTransform=!0},c.prototype._destroy=function(b,E){f.prototype._destroy.call(this,b,function(w){E(w)})};function p(b,E,w){if(E)return b.emit("error",E);if(w!=null&&b.push(w),b._writableState.length)throw new s;if(b._transformState.transforming)throw new a;return b.push(null)}return Je}var Ke,Mt;function Ur(){if(Mt)return Ke;Mt=1,Ke=t;var e=tr();oe(t,e);function t(r){if(!(this instanceof t))return new t(r);e.call(this,r)}return t.prototype._transform=function(r,a,s){s(null,r)},Ke}var Ye,Ct;function Wr(){if(Ct)return Ye;Ct=1;var e;function t(w){var A=!1;return function(){A||(A=!0,w.apply(void 0,arguments))}}var r=fe().codes,a=r.ERR_MISSING_ARGS,s=r.ERR_STREAM_DESTROYED;function f(w){if(w)throw w}function u(w){return w.setHeader&&typeof w.abort=="function"}function c(w,A,R,T){T=t(T);var m=!1;w.on("close",function(){m=!0}),e===void 0&&(e=nt()),e(w,{readable:A,writable:R},function(y){if(y)return T(y);m=!0,T()});var o=!1;return function(y){if(!m&&!o){if(o=!0,u(w))return w.abort();if(typeof w.destroy=="function")return w.destroy();T(y||new s("pipe"))}}}function l(w){w()}function p(w,A){return w.pipe(A)}function b(w){return!w.length||typeof w[w.length-1]!="function"?f:w.pop()}function E(){for(var w=arguments.length,A=new Array(w),R=0;R<w;R++)A[R]=arguments[R];var T=b(A);if(Array.isArray(A[0])&&(A=A[0]),A.length<2)throw new a("streams");var m,o=A.map(function(y,g){var S=g<A.length-1,O=g>0;return c(y,S,O,function(N){m||(m=N),N&&o.forEach(l),!S&&(o.forEach(l),T(m))})});return A.reduce(p)}return Ye=E,Ye}var Hr=W,it=rt.EventEmitter,Vr=oe;Vr(W,it);W.Readable=er();W.Writable=Zt();W.Duplex=ae();W.Transform=tr();W.PassThrough=Ur();W.finished=nt();W.pipeline=Wr();W.Stream=W;function W(){it.call(this)}W.prototype.pipe=function(e,t){var r=this;function a(b){e.writable&&e.write(b)===!1&&r.pause&&r.pause()}r.on("data",a);function s(){r.readable&&r.resume&&r.resume()}e.on("drain",s),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",u),r.on("close",c));var f=!1;function u(){f||(f=!0,e.end())}function c(){f||(f=!0,typeof e.destroy=="function"&&e.destroy())}function l(b){if(p(),it.listenerCount(this,"error")===0)throw b}r.on("error",l),e.on("error",l);function p(){r.removeListener("data",a),e.removeListener("drain",s),r.removeListener("end",u),r.removeListener("close",c),r.removeListener("error",l),e.removeListener("error",l),r.removeListener("end",p),r.removeListener("close",p),e.removeListener("close",p)}return r.on("end",p),r.on("close",p),e.on("close",p),e.emit("pipe",r),e};const at=Sr(Hr);var U={};U.endianness=function(){return"LE"};U.hostname=function(){return typeof location<"u"?location.hostname:""};U.loadavg=function(){return[]};U.uptime=function(){return 0};U.freemem=function(){return Number.MAX_VALUE};U.totalmem=function(){return Number.MAX_VALUE};U.cpus=function(){return[]};U.type=function(){return"Browser"};U.release=function(){return typeof navigator<"u"?navigator.appVersion:""};U.networkInterfaces=U.getNetworkInterfaces=function(){return{}};U.arch=function(){return"javascript"};U.platform=function(){return"browser"};U.tmpdir=U.tmpDir=function(){return"/tmp"};U.EOL=`
`;U.homedir=function(){return"/"};function $(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$=function(t){return typeof t}:$=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(e)}function rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $r(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function nr(e,t,r){return t&&$r(e.prototype,t),e}function we(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ir(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},a=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),a.forEach(function(s){we(e,s,r[s])})}return e}function Gr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}function Qe(e){return Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Qe(e)}function Xe(e,t){return Xe=Object.setPrototypeOf||function(a,s){return a.__proto__=s,a},Xe(e,t)}function Jr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kr(e,t){return t&&(typeof t=="object"||typeof t=="function")?t:Jr(e)}function ar(e){return Qr(e)||or(e)||Zr()}function Yr(e){return zr(e)||or(e)||Xr()}function zr(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function Qr(e){if(Array.isArray(e))return e}function or(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function Xr(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Zr(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var _e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof dt<"u"?dt:typeof self<"u"?self:{},en="Expected a function",fr="__lodash_hash_undefined__",sr=1/0,tn="[object Function]",rn="[object GeneratorFunction]",nn="[object Symbol]",an=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,on=/^\w*$/,fn=/^\./,sn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,un=/[\\^$.*+?()[\]{}|]/g,ln=/\\(\\)?/g,cn=/^\[object .+?Constructor\]$/,dn=typeof _e=="object"&&_e&&_e.Object===Object&&_e,hn=typeof self=="object"&&self&&self.Object===Object&&self,ot=dn||hn||Function("return this")();function pn(e,t){return e==null?void 0:e[t]}function yn(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}var vn=Array.prototype,gn=Function.prototype,ur=Object.prototype,ze=ot["__core-js_shared__"],Pt=function(){var e=/[^.]+$/.exec(ze&&ze.keys&&ze.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),lr=gn.toString,ft=ur.hasOwnProperty,cr=ur.toString,_n=RegExp("^"+lr.call(ft).replace(un,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Dt=ot.Symbol,bn=vn.splice,wn=dr(ot,"Map"),ce=dr(Object,"create"),jt=Dt?Dt.prototype:void 0,qt=jt?jt.toString:void 0;function z(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function mn(){this.__data__=ce?ce(null):{}}function En(e){return this.has(e)&&delete this.__data__[e]}function Sn(e){var t=this.__data__;if(ce){var r=t[e];return r===fr?void 0:r}return ft.call(t,e)?t[e]:void 0}function Rn(e){var t=this.__data__;return ce?t[e]!==void 0:ft.call(t,e)}function Tn(e,t){var r=this.__data__;return r[e]=ce&&t===void 0?fr:t,this}z.prototype.clear=mn;z.prototype.delete=En;z.prototype.get=Sn;z.prototype.has=Rn;z.prototype.set=Tn;function se(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function On(){this.__data__=[]}function Ln(e){var t=this.__data__,r=Se(t,e);if(r<0)return!1;var a=t.length-1;return r==a?t.pop():bn.call(t,r,1),!0}function An(e){var t=this.__data__,r=Se(t,e);return r<0?void 0:t[r][1]}function xn(e){return Se(this.__data__,e)>-1}function Nn(e,t){var r=this.__data__,a=Se(r,e);return a<0?r.push([e,t]):r[a][1]=t,this}se.prototype.clear=On;se.prototype.delete=Ln;se.prototype.get=An;se.prototype.has=xn;se.prototype.set=Nn;function Q(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function Mn(){this.__data__={hash:new z,map:new(wn||se),string:new z}}function Cn(e){return Re(this,e).delete(e)}function Pn(e){return Re(this,e).get(e)}function Dn(e){return Re(this,e).has(e)}function jn(e,t){return Re(this,e).set(e,t),this}Q.prototype.clear=Mn;Q.prototype.delete=Cn;Q.prototype.get=Pn;Q.prototype.has=Dn;Q.prototype.set=jn;function Se(e,t){for(var r=e.length;r--;)if(Gn(e[r][0],t))return r;return-1}function qn(e,t){t=Fn(t,e)?[t]:In(t);for(var r=0,a=t.length;e!=null&&r<a;)e=e[Vn(t[r++])];return r&&r==a?e:void 0}function kn(e){if(!pr(e)||Wn(e))return!1;var t=Jn(e)||yn(e)?_n:cn;return t.test($n(e))}function Bn(e){if(typeof e=="string")return e;if(ut(e))return qt?qt.call(e):"";var t=e+"";return t=="0"&&1/e==-sr?"-0":t}function In(e){return hr(e)?e:Hn(e)}function Re(e,t){var r=e.__data__;return Un(t)?r[typeof t=="string"?"string":"hash"]:r.map}function dr(e,t){var r=pn(e,t);return kn(r)?r:void 0}function Fn(e,t){if(hr(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||ut(e)?!0:on.test(e)||!an.test(e)||t!=null&&e in Object(t)}function Un(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Wn(e){return!!Pt&&Pt in e}var Hn=st(function(e){e=Yn(e);var t=[];return fn.test(e)&&t.push(""),e.replace(sn,function(r,a,s,f){t.push(s?f.replace(ln,"$1"):a||r)}),t});function Vn(e){if(typeof e=="string"||ut(e))return e;var t=e+"";return t=="0"&&1/e==-sr?"-0":t}function $n(e){if(e!=null){try{return lr.call(e)}catch{}try{return e+""}catch{}}return""}function st(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(en);var r=function(){var a=arguments,s=t?t.apply(this,a):a[0],f=r.cache;if(f.has(s))return f.get(s);var u=e.apply(this,a);return r.cache=f.set(s,u),u};return r.cache=new(st.Cache||Q),r}st.Cache=Q;function Gn(e,t){return e===t||e!==e&&t!==t}var hr=Array.isArray;function Jn(e){var t=pr(e)?cr.call(e):"";return t==tn||t==rn}function pr(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Kn(e){return!!e&&typeof e=="object"}function ut(e){return typeof e=="symbol"||Kn(e)&&cr.call(e)==nn}function Yn(e){return e==null?"":Bn(e)}function zn(e,t,r){var a=e==null?void 0:qn(e,t);return a===void 0?r:a}var Ze=zn;function Qn(e,t,r){return e[t]===void 0?r:e[t]}function yr(e,t,r){var a=Array.isArray(t)?t:t.split("."),s=ar(a),f=s[0],u=s.slice(1);return ir({},e,we({},f,a.length>1?yr(e[f]||{},u,r):r))}function vr(e,t){var r=Array.isArray(t)?t:t.split("."),a=ar(r),s=a[0],f=a.slice(1);return $(e[s])!=="object"?e:r.length===1?Object.keys(e).filter(function(u){return u!==s}).reduce(function(u,c){return Object.assign(u,we({},c,e[c]))},{}):Object.keys(e).reduce(function(u,c){return ir({},u,we({},c,c!==s?e[c]:vr(e[s],f)))},{})}function Xn(e,t){try{return e.push.apply(e,Yr(t)),e}catch{return e.concat(t)}}function Zn(e,t){var r=!0;return e.reduce(function(a,s){return s==null&&(s=""),r?(r=!1,"".concat(s)):"".concat(a).concat(t).concat(s)},"")}var J={getProp:Qn,setProp:yr,unsetProp:vr,fastJoin:Zn,flattenReducer:Xn},kt=J.getProp,Bt=J.fastJoin,ei=J.flattenReducer,ti=function(){function e(t){rr(this,e),this.opts=this.preprocessOpts(t)}return nr(e,[{key:"preprocessOpts",value:function(r){var a=Object.assign({},r);return a.transforms=Array.isArray(a.transforms)?a.transforms:a.transforms?[a.transforms]:[],a.delimiter=a.delimiter||",",a.eol=a.eol||U.EOL,a.quote=typeof a.quote=="string"?a.quote:'"',a.escapedQuote=typeof a.escapedQuote=="string"?a.escapedQuote:"".concat(a.quote).concat(a.quote),a.header=a.header!==!1,a.includeEmptyRows=a.includeEmptyRows||!1,a.withBOM=a.withBOM||!1,a}},{key:"preprocessFieldsInfo",value:function(r){var a=this;return r.map(function(s){if(typeof s=="string")return{label:s,value:s.includes(".")||s.includes("[")?function(l){return Ze(l,s,a.opts.defaultValue)}:function(l){return kt(l,s,a.opts.defaultValue)}};if($(s)==="object"){var f="default"in s?s.default:a.opts.defaultValue;if(typeof s.value=="string")return{label:s.label||s.value,value:s.value.includes(".")||s.value.includes("[")?function(l){return Ze(l,s.value,f)}:function(l){return kt(l,s.value,f)}};if(typeof s.value=="function"){var u=s.label||s.value.name||"",c={label:u,default:f};return{label:u,value:function(p){var b=s.value(p,c);return b??f}}}}throw new Error("Invalid field info option. "+JSON.stringify(s))})}},{key:"getHeader",value:function(){var r=this;return Bt(this.opts.fields.map(function(a){return r.processValue(a.label)}),this.opts.delimiter)}},{key:"preprocessRow",value:function(r){return this.opts.transforms.reduce(function(a,s){return a.map(function(f){return s(f)}).reduce(ei,[])},[r])}},{key:"processRow",value:function(r){var a=this;if(r){var s=this.opts.fields.map(function(f){return a.processCell(r,f)});if(!(!this.opts.includeEmptyRows&&s.every(function(f){return f===void 0})))return Bt(s,this.opts.delimiter)}}},{key:"processCell",value:function(r,a){return this.processValue(a.value(r))}},{key:"processValue",value:function(r){if(r!=null){var a=$(r);if(a!=="boolean"&&a!=="number"&&a!=="string"){if(r=JSON.stringify(r),r===void 0)return;r[0]==='"'&&(r=r.replace(/^"(.+)"$/,"$1"))}return typeof r=="string"&&(this.opts.excelStrings?(r.includes(this.opts.quote)&&(r=r.replace(new RegExp(this.opts.quote,"g"),"".concat(this.opts.escapedQuote).concat(this.opts.escapedQuote))),r='"=""'.concat(r,'"""')):(r.includes(this.opts.quote)&&(r=r.replace(new RegExp(this.opts.quote,"g"),this.opts.escapedQuote)),r="".concat(this.opts.quote).concat(r).concat(this.opts.quote))),r}}}]),e}(),ri=ti,ni=J.fastJoin,ii=J.flattenReducer,ai=function(e){Gr(t,e);function t(r){var a;return rr(this,t),a=Kr(this,Qe(t).call(this,r)),a.opts.fields&&(a.opts.fields=a.preprocessFieldsInfo(a.opts.fields)),a}return nr(t,[{key:"parse",value:function(a){var s=this.preprocessData(a);this.opts.fields||(this.opts.fields=s.reduce(function(l,p){return Object.keys(p).forEach(function(b){l.includes(b)||l.push(b)}),l},[]),this.opts.fields=this.preprocessFieldsInfo(this.opts.fields));var f=this.opts.header?this.getHeader():"",u=this.processData(s),c=(this.opts.withBOM?"\uFEFF":"")+f+(f&&u?this.opts.eol:"")+u;return c}},{key:"preprocessData",value:function(a){var s=this,f=Array.isArray(a)?a:[a];if(!this.opts.fields&&(f.length===0||$(f[0])!=="object"))throw new Error('Data should not be empty or the "fields" option should be included');return this.opts.transforms.length===0?f:f.map(function(u){return s.preprocessRow(u)}).reduce(ii,[])}},{key:"processData",value:function(a){var s=this;return ni(a.map(function(f){return s.processRow(f)}).filter(function(f){return f}),this.opts.eol)}}]),t}(ri),oi=ai,D={};D.LEFT_BRACE=1;D.RIGHT_BRACE=2;D.LEFT_BRACKET=3;D.RIGHT_BRACKET=4;D.COLON=5;D.COMMA=6;D.TRUE=7;D.FALSE=8;D.NULL=9;D.STRING=10;D.NUMBER=11;D.START=17;D.STOP=18;D.TRUE1=33;D.TRUE2=34;D.TRUE3=35;D.FALSE1=49;D.FALSE2=50;D.FALSE3=51;D.FALSE4=52;D.NULL1=65;D.NULL2=66;D.NULL3=67;D.NUMBER1=81;D.NUMBER3=83;D.STRING1=97;D.STRING2=98;D.STRING3=99;D.STRING4=100;D.STRING5=101;D.STRING6=102;D.VALUE=113;D.KEY=114;D.OBJECT=129;D.ARRAY=130;at.Transform;at.Transform;function fi(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.objects,r=t===void 0?!0:t,a=e.arrays,s=a===void 0?!1:a,f=e.separator,u=f===void 0?".":f;function c(l,p,b){return Object.keys(l).forEach(function(E){var w=b?"".concat(b).concat(u).concat(E):E,A=l[E];if(r&&$(A)==="object"&&A!==null&&!Array.isArray(A)&&Object.prototype.toString.call(A.toJSON)!=="[object Function]"&&Object.keys(A).length){c(A,p,w);return}if(s&&Array.isArray(A)){c(A,p,w);return}p[w]=A}),p}return function(l){return c(l,{})}}var si=fi,ui=J.setProp,li=J.unsetProp,gr=J.flattenReducer;function et(e,t){return Object.keys(e).reduce(function(r,a){var s=t?"".concat(t,".").concat(a):a,f=e[a];return $(f)==="object"&&f!==null&&!Array.isArray(f)&&Object.prototype.toString.call(f.toJSON)!=="[object Function]"&&Object.keys(f).length?r=r.concat(et(f,s)):Array.isArray(f)&&(r.push(s),r=r.concat(f.map(function(u){return et(u,s)}).reduce(gr,[]).filter(function(u,c,l){return l.indexOf(u)!==c}))),r},[])}function ci(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.paths,r=t===void 0?void 0:t,a=e.blankOut,s=a===void 0?!1:a;function f(u,c){return u.map(function(l){var p=Ze(l,c);return Array.isArray(p)?p.length?p.map(function(b,E){var w=s&&E>0?{}:l;return ui(w,c,b)}):li(l,c):l}).reduce(gr,[])}return r=Array.isArray(r)?r:r?[r]:void 0,function(u){return(r||et(u)).reduce(f,[u])}}var di=ci;at.Readable;var hi=oi,pi={flatten:si,unwind:di},_r=V.forwardRef(function(e,t){var r={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return V.createElement(Ut,Ft({iconAttrs:r,iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:t}),V.createElement("path",{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"}))});_r.displayName="ThreeDotsVertical";var br=V.forwardRef(function(e,t){var r={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return V.createElement(Ut,Ft({iconAttrs:r,iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:t}),V.createElement("path",{fillRule:"evenodd",d:"M7.646 10.854a.5.5 0 0 0 .708 0l2-2a.5.5 0 0 0-.708-.708L8.5 9.293V5.5a.5.5 0 0 0-1 0v3.793L6.354 8.146a.5.5 0 1 0-.708.708l2 2z"}),V.createElement("path",{d:"M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"}))});br.displayName="CloudArrowDown";const yi=Or(Tr)`
  font-size: 12px;
`,wr=({filename:e="export",data:t,formats:r=["csv","json"],addSketchName:a=!0,addTimestamp:s=!0,...f})=>{const{t:u}=xr(),l=[{label:u("DataDownload - export CSV format label","Export CSV"),extension:"csv",contentType:"application/csv",url:""},{label:u("DataDownload - export JSON format label","Export JSON"),extension:"json",contentType:"application/json",url:""}].filter(o=>r.includes(o.extension)),[p,b]=V.useState(l),E=(()=>{try{const[{name:o}]=Ar();return o}catch{return""}})(),w=a&&E?`__${E.replace(/\s/g,"_")}`:"",A=s?`__${new Date().toISOString().split(".")[0]}Z`:"",R=`${e}${w}${A}`;V.useEffect(()=>{if(!t||t.length===0)return;const o={csv:()=>new hi({transforms:[pi.flatten({arrays:!0})]}).parse(t),json:()=>JSON.stringify(t,null,2)},y=p.map(g=>{const S=new Blob([o[g.extension]()],{type:g.contentType});return g.url!=""&&window.URL.revokeObjectURL(g.url),{...g,url:window.URL.createObjectURL(S)}},[t]);b(y)},[t]);const T=p.map((o,y)=>G.jsx("a",{download:`${R}.${o.extension}`,href:t&&t.length>0?o.url:"#","aria-disabled":!t||t.length===0,children:G.jsxs(yi,{children:[G.jsx(br,{color:"#999",size:"20",style:{paddingRight:5}}),G.jsx("span",{style:{verticalAlign:"middle"},children:o.label})]})},y)),m={titleElement:G.jsx(_r,{size:18,color:"#999"}),...f};return G.jsx(G.Fragment,{children:G.jsx(Rr,{...m,children:T})})},xi=wr;wr.__docgenInfo={description:`Dropdown menu for transforming data to CSV/JSON format and initiating a browser download
Defaults to CSV and JSON, and filename will include sketch name from ReportContext (if available)
and current timestamp`,methods:[],displayName:"DataDownload",props:{filename:{required:!1,tsType:{name:"string"},description:"Name minus extension",defaultValue:{value:'"export"',computed:!1}},data:{required:!0,tsType:{name:"Array",elements:[{name:"object"}],raw:"object[]"},description:"Raw data to format and allow to download, nested objects and arrays will get flattened"},formats:{required:!1,tsType:{name:"Array",elements:[{name:"unknown[number]",raw:"(typeof SUPPORTED_FORMATS)[number]"}],raw:"SUPPORTED_FORMAT[]"},description:"Formats to offer, defaults to csv only",defaultValue:{value:'["csv", "json"]',computed:!1}},addSketchName:{required:!1,tsType:{name:"boolean"},description:"Add sketch name to filename, default to true",defaultValue:{value:"true",computed:!1}},addTimestamp:{required:!1,tsType:{name:"boolean"},description:"Add timestamp to filename, defaults to true",defaultValue:{value:"true",computed:!1}},titleElement:{required:!1,tsType:{name:"JSX.Element"},description:""}},composes:["DataDownloadDropdownProps"]};export{xi as D};
