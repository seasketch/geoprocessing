import{j as P}from"./jsx-runtime-qGIIFXMu.js";import{r as ce,c as M,a as tn,g as St}from"./index-CDs2tPxN.js";import{R as kt,s as rn}from"./ReportContext-BTL8L5yF.js";import"./index-BAMY2Nnw.js";import"./_getPrototype-CLNpD7aq.js";import{c as nn}from"./cloneDeep-DUn4YpqL.js";const an=[{name:"Spanish",localName:"Español",code:"es"},{name:"Dhivehi",localName:"ދިވެހި,",code:"dv",rtl:!0},{name:"Portuguese",localName:"Portuguese",code:"pt"},{name:"Norwegian",localName:"Norsk",code:"no"},{name:"Kosraean",localName:"Kosraean",code:"kos"},{name:"Samoan",localName:"Samoan",code:"sm"},{name:"Chuukese",localName:"Chuukese",code:"CHK"},{name:"Fijian",localName:"Na vosa vaka-Viti",code:"fj"},{name:"Fiji Hindi",localName:"फ़िजी हिंदी",code:"fh"},{name:"Hawaiian",localName:"ʻŌlelo Hawaiʻi",code:"haw"},{name:"French",localName:"Français",code:"fr"},{name:"German",localName:"Deutsch",code:"de"},{name:"Croatian",localName:"Hrvatski",code:"hr"},{name:"Afrikaans",localName:"Afrikaans",code:"af"},{name:"Chinese",localName:"中文",code:"zh-Hans"},{name:"Arabic",localName:"اَلْعَرَبِيَّةُ",code:"ar",rtl:!0},{name:"Dutch",code:"nl",localName:"Nederlands"},{name:"Italian",code:"it",localName:"Italiano"},{name:"Bulgarian",code:"bg",localName:"български"},{code:"fr-be",name:"French (Belgium)",localName:"Français (Belgique)"},{code:"el",name:"Greek",localName:"Ελληνικά"},{name:"Hindi",code:"hi",localName:"हिन्दी"},{name:"Indonesian",code:"id",localName:"Bahasa Indonesia"},{name:"Maori",code:"mi",localName:"Te Reo Māori"},{name:"Polish",code:"pl",localName:"Polski"},{name:"Romanian",code:"ro",localName:"Română"},{name:"Tongan",code:"to",localName:"lea fakatonga"},{name:"Zulu",code:"zu",localName:"isiZulu"},{name:"Swedish",code:"sv",localName:"Svenska"},{name:"Swedish (Finland)",code:"sv-fi",localName:"Svenska (Finland)"},{name:"Estonian",code:"et",localName:"Eesti"},{name:"Latvian",code:"lv",localName:"Latviešu"},{name:"Lithuanian",code:"lt",localName:"Lietuvių"},{name:"Russian",code:"ru",localName:"Русский"},{name:"Danish",code:"da",localName:"Dansk"}].sort((r,e)=>r.name.localeCompare(e.name)),mt=[{name:"English",localName:"English",code:"EN"},...an];function Qt(){const r=ce.useContext(kt);if(!r)throw new Error("ReportContext could not be found.");function e(n){r&&r.changeLanguage&&r.changeLanguage(n)}const t=mt.find(n=>n.code===r.language)||mt[0];return[t.code,e,t.rtl||!1]}const Xt=()=>{const[r,e]=Qt();return P.jsx("select",{value:r,onChange:t=>e(t.target.value),children:mt.map(t=>P.jsx("option",{value:t.code,children:t.name},t.code))})};Xt.__docgenInfo={description:"",methods:[],displayName:"LanguageSwitcher"};var T;(function(r){r.assertEqual=a=>a;function e(a){}r.assertIs=e;function t(a){throw new Error}r.assertNever=t,r.arrayToEnum=a=>{const s={};for(const i of a)s[i]=i;return s},r.getValidEnumValues=a=>{const s=r.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),i={};for(const o of s)i[o]=a[o];return r.objectValues(i)},r.objectValues=a=>r.objectKeys(a).map(function(s){return a[s]}),r.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const s=[];for(const i in a)Object.prototype.hasOwnProperty.call(a,i)&&s.push(i);return s},r.find=(a,s)=>{for(const i of a)if(s(i))return i},r.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function n(a,s=" | "){return a.map(i=>typeof i=="string"?`'${i}'`:i).join(s)}r.joinValues=n,r.jsonStringifyReplacer=(a,s)=>typeof s=="bigint"?s.toString():s})(T||(T={}));var He;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(He||(He={}));const b=T.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),H=r=>{switch(typeof r){case"undefined":return b.undefined;case"string":return b.string;case"number":return isNaN(r)?b.nan:b.number;case"boolean":return b.boolean;case"function":return b.function;case"bigint":return b.bigint;case"symbol":return b.symbol;case"object":return Array.isArray(r)?b.array:r===null?b.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?b.promise:typeof Map<"u"&&r instanceof Map?b.map:typeof Set<"u"&&r instanceof Set?b.set:typeof Date<"u"&&r instanceof Date?b.date:b.object;default:return b.unknown}},y=T.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),er=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class L extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(s){return s.message},n={_errors:[]},a=s=>{for(const i of s.issues)if(i.code==="invalid_union")i.unionErrors.map(a);else if(i.code==="invalid_return_type")a(i.returnTypeError);else if(i.code==="invalid_arguments")a(i.argumentsError);else if(i.path.length===0)n._errors.push(t(i));else{let o=n,m=0;for(;m<i.path.length;){const h=i.path[m];m===i.path.length-1?(o[h]=o[h]||{_errors:[]},o[h]._errors.push(t(i))):o[h]=o[h]||{_errors:[]},o=o[h],m++}}};return a(this),n}static assert(e){if(!(e instanceof L))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,T.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):n.push(e(a));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}L.create=r=>new L(r);const le=(r,e)=>{let t;switch(r.code){case y.invalid_type:r.received===b.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case y.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,T.jsonStringifyReplacer)}`;break;case y.unrecognized_keys:t=`Unrecognized key(s) in object: ${T.joinValues(r.keys,", ")}`;break;case y.invalid_union:t="Invalid input";break;case y.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${T.joinValues(r.options)}`;break;case y.invalid_enum_value:t=`Invalid enum value. Expected ${T.joinValues(r.options)}, received '${r.received}'`;break;case y.invalid_arguments:t="Invalid function arguments";break;case y.invalid_return_type:t="Invalid function return type";break;case y.invalid_date:t="Invalid date";break;case y.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:T.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case y.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case y.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case y.custom:t="Invalid input";break;case y.invalid_intersection_types:t="Intersection results could not be merged";break;case y.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case y.not_finite:t="Number must be finite";break;default:t=e.defaultError,T.assertNever(r)}return{message:t}};let tr=le;function rr(r){tr=r}function Le(){return tr}const De=r=>{const{data:e,path:t,errorMaps:n,issueData:a}=r,s=[...t,...a.path||[]],i={...a,path:s};if(a.message!==void 0)return{...a,path:s,message:a.message};let o="";const m=n.filter(h=>!!h).slice().reverse();for(const h of m)o=h(i,{data:e,defaultError:o}).message;return{...a,path:s,message:o}},nr=[];function _(r,e){const t=Le(),n=De({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===le?void 0:le].filter(a=>!!a)});r.common.issues.push(n)}class I{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const a of t){if(a.status==="aborted")return k;a.status==="dirty"&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const a of t){const s=await a.key,i=await a.value;n.push({key:s,value:i})}return I.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const a of t){const{key:s,value:i}=a;if(s.status==="aborted"||i.status==="aborted")return k;s.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof i.value<"u"||a.alwaysSet)&&(n[s.value]=i.value)}return{status:e.value,value:n}}}const k=Object.freeze({status:"aborted"}),oe=r=>({status:"dirty",value:r}),$=r=>({status:"valid",value:r}),Ye=r=>r.status==="aborted",Qe=r=>r.status==="dirty",me=r=>r.status==="valid",ge=r=>typeof Promise<"u"&&r instanceof Promise;function Xe(r,e,t,n){if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(r)}function ar(r,e,t,n,a){if(typeof e=="function"?r!==e||!a:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t}var w;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(w||(w={}));var Me,$e;class K{constructor(e,t,n,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Dt=(r,e)=>{if(me(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new L(r.common.issues);return this._error=t,this._error}}};function C(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:a}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(i,o)=>{var m,h;const{message:v}=r;return i.code==="invalid_enum_value"?{message:v??o.defaultError}:typeof o.data>"u"?{message:(m=v??n)!==null&&m!==void 0?m:o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:(h=v??t)!==null&&h!==void 0?h:o.defaultError}},description:a}}class E{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return H(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:H(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new I,ctx:{common:e.parent.common,data:e.data,parsedType:H(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(ge(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const a={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:H(e)},s=this._parseSync({data:e,path:a.path,parent:a});return Dt(a,s)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:H(e)},a=this._parse({data:e,path:n.path,parent:n}),s=await(ge(a)?a:Promise.resolve(a));return Dt(n,s)}refine(e,t){const n=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,s)=>{const i=e(a),o=()=>s.addIssue({code:y.custom,...n(a)});return typeof Promise<"u"&&i instanceof Promise?i.then(m=>m?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((n,a)=>e(n)?!0:(a.addIssue(typeof t=="function"?t(n,a):t),!1))}_refinement(e){return new D({schema:this,typeName:S.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return V.create(this,this._def)}nullable(){return ee.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return B.create(this,this._def)}promise(){return fe.create(this,this._def)}or(e){return be.create([this,e],this._def)}and(e){return xe.create(this,e,this._def)}transform(e){return new D({...C(this._def),schema:this,typeName:S.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Ee({...C(this._def),innerType:this,defaultValue:t,typeName:S.ZodDefault})}brand(){return new tt({typeName:S.ZodBranded,type:this,...C(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Ce({...C(this._def),innerType:this,catchValue:t,typeName:S.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Te.create(this,e)}readonly(){return Ne.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const sn=/^c[^\s-]{8,}$/i,on=/^[0-9a-z]+$/,cn=/^[0-9A-HJKMNP-TV-Z]{26}$/,un=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ln=/^[a-z0-9_-]{21}$/i,dn=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,fn=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,hn="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let lt;const pn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,mn=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,gn=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,sr="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",yn=new RegExp(`^${sr}$`);function ir(r){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`),e}function vn(r){return new RegExp(`^${ir(r)}$`)}function jt(r){let e=`${sr}T${ir(r)}`;const t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function _n(r,e){return!!((e==="v4"||!e)&&pn.test(r)||(e==="v6"||!e)&&mn.test(r))}class U extends E{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==b.string){const s=this._getOrReturnCtx(e);return _(s,{code:y.invalid_type,expected:b.string,received:s.parsedType}),k}const n=new I;let a;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(a=this._getOrReturnCtx(e,a),_(a,{code:y.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(a=this._getOrReturnCtx(e,a),_(a,{code:y.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const i=e.data.length>s.value,o=e.data.length<s.value;(i||o)&&(a=this._getOrReturnCtx(e,a),i?_(a,{code:y.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&_(a,{code:y.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")fn.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"email",code:y.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")lt||(lt=new RegExp(hn,"u")),lt.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"emoji",code:y.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")un.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"uuid",code:y.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")ln.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"nanoid",code:y.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")sn.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"cuid",code:y.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")on.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"cuid2",code:y.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")cn.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"ulid",code:y.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),_(a,{validation:"url",code:y.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"regex",code:y.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(a=this._getOrReturnCtx(e,a),_(a,{code:y.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(a=this._getOrReturnCtx(e,a),_(a,{code:y.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(a=this._getOrReturnCtx(e,a),_(a,{code:y.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?jt(s).test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{code:y.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?yn.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{code:y.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?vn(s).test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{code:y.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?dn.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"duration",code:y.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?_n(e.data,s.version)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"ip",code:y.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?gn.test(e.data)||(a=this._getOrReturnCtx(e,a),_(a,{validation:"base64",code:y.invalid_string,message:s.message}),n.dirty()):T.assertNever(s);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(a=>e.test(a),{validation:t,code:y.invalid_string,...w.errToObj(n)})}_addCheck(e){return new U({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...w.errToObj(e)})}url(e){return this._addCheck({kind:"url",...w.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...w.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...w.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...w.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...w.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...w.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...w.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...w.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...w.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...w.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...w.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...w.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...w.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...w.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...w.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...w.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...w.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...w.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...w.errToObj(t)})}nonempty(e){return this.min(1,w.errToObj(e))}trim(){return new U({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new U({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new U({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}U.create=r=>{var e;return new U({checks:[],typeName:S.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...C(r)})};function bn(r,e){const t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,a=t>n?t:n,s=parseInt(r.toFixed(a).replace(".","")),i=parseInt(e.toFixed(a).replace(".",""));return s%i/Math.pow(10,a)}class Y extends E{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==b.number){const s=this._getOrReturnCtx(e);return _(s,{code:y.invalid_type,expected:b.number,received:s.parsedType}),k}let n;const a=new I;for(const s of this._def.checks)s.kind==="int"?T.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{code:y.invalid_type,expected:"integer",received:"float",message:s.message}),a.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),_(n,{code:y.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),_(n,{code:y.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="multipleOf"?bn(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),_(n,{code:y.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{code:y.not_finite,message:s.message}),a.dirty()):T.assertNever(s);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,w.toString(t))}gt(e,t){return this.setLimit("min",e,!1,w.toString(t))}lte(e,t){return this.setLimit("max",e,!0,w.toString(t))}lt(e,t){return this.setLimit("max",e,!1,w.toString(t))}setLimit(e,t,n,a){return new Y({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:w.toString(a)}]})}_addCheck(e){return new Y({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:w.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:w.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:w.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:w.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:w.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:w.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:w.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:w.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:w.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&T.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Y.create=r=>new Y({checks:[],typeName:S.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...C(r)});class Q extends E{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==b.bigint){const s=this._getOrReturnCtx(e);return _(s,{code:y.invalid_type,expected:b.bigint,received:s.parsedType}),k}let n;const a=new I;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),_(n,{code:y.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),_(n,{code:y.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),_(n,{code:y.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):T.assertNever(s);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,w.toString(t))}gt(e,t){return this.setLimit("min",e,!1,w.toString(t))}lte(e,t){return this.setLimit("max",e,!0,w.toString(t))}lt(e,t){return this.setLimit("max",e,!1,w.toString(t))}setLimit(e,t,n,a){return new Q({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:w.toString(a)}]})}_addCheck(e){return new Q({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:w.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:w.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:w.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:w.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:w.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Q.create=r=>{var e;return new Q({checks:[],typeName:S.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...C(r)})};class ye extends E{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==b.boolean){const n=this._getOrReturnCtx(e);return _(n,{code:y.invalid_type,expected:b.boolean,received:n.parsedType}),k}return $(e.data)}}ye.create=r=>new ye({typeName:S.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...C(r)});class ae extends E{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==b.date){const s=this._getOrReturnCtx(e);return _(s,{code:y.invalid_type,expected:b.date,received:s.parsedType}),k}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return _(s,{code:y.invalid_date}),k}const n=new I;let a;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(a=this._getOrReturnCtx(e,a),_(a,{code:y.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(a=this._getOrReturnCtx(e,a),_(a,{code:y.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):T.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ae({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:w.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:w.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}ae.create=r=>new ae({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:S.ZodDate,...C(r)});class Ue extends E{_parse(e){if(this._getType(e)!==b.symbol){const n=this._getOrReturnCtx(e);return _(n,{code:y.invalid_type,expected:b.symbol,received:n.parsedType}),k}return $(e.data)}}Ue.create=r=>new Ue({typeName:S.ZodSymbol,...C(r)});class ve extends E{_parse(e){if(this._getType(e)!==b.undefined){const n=this._getOrReturnCtx(e);return _(n,{code:y.invalid_type,expected:b.undefined,received:n.parsedType}),k}return $(e.data)}}ve.create=r=>new ve({typeName:S.ZodUndefined,...C(r)});class _e extends E{_parse(e){if(this._getType(e)!==b.null){const n=this._getOrReturnCtx(e);return _(n,{code:y.invalid_type,expected:b.null,received:n.parsedType}),k}return $(e.data)}}_e.create=r=>new _e({typeName:S.ZodNull,...C(r)});class de extends E{constructor(){super(...arguments),this._any=!0}_parse(e){return $(e.data)}}de.create=r=>new de({typeName:S.ZodAny,...C(r)});class ne extends E{constructor(){super(...arguments),this._unknown=!0}_parse(e){return $(e.data)}}ne.create=r=>new ne({typeName:S.ZodUnknown,...C(r)});class W extends E{_parse(e){const t=this._getOrReturnCtx(e);return _(t,{code:y.invalid_type,expected:b.never,received:t.parsedType}),k}}W.create=r=>new W({typeName:S.ZodNever,...C(r)});class Be extends E{_parse(e){if(this._getType(e)!==b.undefined){const n=this._getOrReturnCtx(e);return _(n,{code:y.invalid_type,expected:b.void,received:n.parsedType}),k}return $(e.data)}}Be.create=r=>new Be({typeName:S.ZodVoid,...C(r)});class B extends E{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),a=this._def;if(t.parsedType!==b.array)return _(t,{code:y.invalid_type,expected:b.array,received:t.parsedType}),k;if(a.exactLength!==null){const i=t.data.length>a.exactLength.value,o=t.data.length<a.exactLength.value;(i||o)&&(_(t,{code:i?y.too_big:y.too_small,minimum:o?a.exactLength.value:void 0,maximum:i?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&(_(t,{code:y.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&(_(t,{code:y.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>a.type._parseAsync(new K(t,i,t.path,o)))).then(i=>I.mergeArray(n,i));const s=[...t.data].map((i,o)=>a.type._parseSync(new K(t,i,t.path,o)));return I.mergeArray(n,s)}get element(){return this._def.type}min(e,t){return new B({...this._def,minLength:{value:e,message:w.toString(t)}})}max(e,t){return new B({...this._def,maxLength:{value:e,message:w.toString(t)}})}length(e,t){return new B({...this._def,exactLength:{value:e,message:w.toString(t)}})}nonempty(e){return this.min(1,e)}}B.create=(r,e)=>new B({type:r,minLength:null,maxLength:null,exactLength:null,typeName:S.ZodArray,...C(e)});function he(r){if(r instanceof A){const e={};for(const t in r.shape){const n=r.shape[t];e[t]=V.create(he(n))}return new A({...r._def,shape:()=>e})}else return r instanceof B?new B({...r._def,type:he(r.element)}):r instanceof V?V.create(he(r.unwrap())):r instanceof ee?ee.create(he(r.unwrap())):r instanceof q?q.create(r.items.map(e=>he(e))):r}class A extends E{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=T.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==b.object){const h=this._getOrReturnCtx(e);return _(h,{code:y.invalid_type,expected:b.object,received:h.parsedType}),k}const{status:n,ctx:a}=this._processInputParams(e),{shape:s,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof W&&this._def.unknownKeys==="strip"))for(const h in a.data)i.includes(h)||o.push(h);const m=[];for(const h of i){const v=s[h],j=a.data[h];m.push({key:{status:"valid",value:h},value:v._parse(new K(a,j,a.path,h)),alwaysSet:h in a.data})}if(this._def.catchall instanceof W){const h=this._def.unknownKeys;if(h==="passthrough")for(const v of o)m.push({key:{status:"valid",value:v},value:{status:"valid",value:a.data[v]}});else if(h==="strict")o.length>0&&(_(a,{code:y.unrecognized_keys,keys:o}),n.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const v of o){const j=a.data[v];m.push({key:{status:"valid",value:v},value:h._parse(new K(a,j,a.path,v)),alwaysSet:v in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const h=[];for(const v of m){const j=await v.key,R=await v.value;h.push({key:j,value:R,alwaysSet:v.alwaysSet})}return h}).then(h=>I.mergeObjectSync(n,h)):I.mergeObjectSync(n,m)}get shape(){return this._def.shape()}strict(e){return w.errToObj,new A({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var a,s,i,o;const m=(i=(s=(a=this._def).errorMap)===null||s===void 0?void 0:s.call(a,t,n).message)!==null&&i!==void 0?i:n.defaultError;return t.code==="unrecognized_keys"?{message:(o=w.errToObj(e).message)!==null&&o!==void 0?o:m}:{message:m}}}:{}})}strip(){return new A({...this._def,unknownKeys:"strip"})}passthrough(){return new A({...this._def,unknownKeys:"passthrough"})}extend(e){return new A({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new A({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:S.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new A({...this._def,catchall:e})}pick(e){const t={};return T.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new A({...this._def,shape:()=>t})}omit(e){const t={};return T.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new A({...this._def,shape:()=>t})}deepPartial(){return he(this)}partial(e){const t={};return T.objectKeys(this.shape).forEach(n=>{const a=this.shape[n];e&&!e[n]?t[n]=a:t[n]=a.optional()}),new A({...this._def,shape:()=>t})}required(e){const t={};return T.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof V;)s=s._def.innerType;t[n]=s}}),new A({...this._def,shape:()=>t})}keyof(){return or(T.objectKeys(this.shape))}}A.create=(r,e)=>new A({shape:()=>r,unknownKeys:"strip",catchall:W.create(),typeName:S.ZodObject,...C(e)});A.strictCreate=(r,e)=>new A({shape:()=>r,unknownKeys:"strict",catchall:W.create(),typeName:S.ZodObject,...C(e)});A.lazycreate=(r,e)=>new A({shape:r,unknownKeys:"strip",catchall:W.create(),typeName:S.ZodObject,...C(e)});class be extends E{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function a(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const i=s.map(o=>new L(o.ctx.common.issues));return _(t,{code:y.invalid_union,unionErrors:i}),k}if(t.common.async)return Promise.all(n.map(async s=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(a);{let s;const i=[];for(const m of n){const h={...t,common:{...t.common,issues:[]},parent:null},v=m._parseSync({data:t.data,path:t.path,parent:h});if(v.status==="valid")return v;v.status==="dirty"&&!s&&(s={result:v,ctx:h}),h.common.issues.length&&i.push(h.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const o=i.map(m=>new L(m));return _(t,{code:y.invalid_union,unionErrors:o}),k}}get options(){return this._def.options}}be.create=(r,e)=>new be({options:r,typeName:S.ZodUnion,...C(e)});const G=r=>r instanceof Se?G(r.schema):r instanceof D?G(r.innerType()):r instanceof ke?[r.value]:r instanceof X?r.options:r instanceof je?T.objectValues(r.enum):r instanceof Ee?G(r._def.innerType):r instanceof ve?[void 0]:r instanceof _e?[null]:r instanceof V?[void 0,...G(r.unwrap())]:r instanceof ee?[null,...G(r.unwrap())]:r instanceof tt||r instanceof Ne?G(r.unwrap()):r instanceof Ce?G(r._def.innerType):[];class qe extends E{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==b.object)return _(t,{code:y.invalid_type,expected:b.object,received:t.parsedType}),k;const n=this.discriminator,a=t.data[n],s=this.optionsMap.get(a);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(_(t,{code:y.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),k)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const a=new Map;for(const s of t){const i=G(s.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of i){if(a.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);a.set(o,s)}}return new qe({typeName:S.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...C(n)})}}function gt(r,e){const t=H(r),n=H(e);if(r===e)return{valid:!0,data:r};if(t===b.object&&n===b.object){const a=T.objectKeys(e),s=T.objectKeys(r).filter(o=>a.indexOf(o)!==-1),i={...r,...e};for(const o of s){const m=gt(r[o],e[o]);if(!m.valid)return{valid:!1};i[o]=m.data}return{valid:!0,data:i}}else if(t===b.array&&n===b.array){if(r.length!==e.length)return{valid:!1};const a=[];for(let s=0;s<r.length;s++){const i=r[s],o=e[s],m=gt(i,o);if(!m.valid)return{valid:!1};a.push(m.data)}return{valid:!0,data:a}}else return t===b.date&&n===b.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class xe extends E{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=(s,i)=>{if(Ye(s)||Ye(i))return k;const o=gt(s.value,i.value);return o.valid?((Qe(s)||Qe(i))&&t.dirty(),{status:t.value,value:o.data}):(_(n,{code:y.invalid_intersection_types}),k)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,i])=>a(s,i)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}xe.create=(r,e,t)=>new xe({left:r,right:e,typeName:S.ZodIntersection,...C(t)});class q extends E{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==b.array)return _(n,{code:y.invalid_type,expected:b.array,received:n.parsedType}),k;if(n.data.length<this._def.items.length)return _(n,{code:y.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),k;!this._def.rest&&n.data.length>this._def.items.length&&(_(n,{code:y.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...n.data].map((i,o)=>{const m=this._def.items[o]||this._def.rest;return m?m._parse(new K(n,i,n.path,o)):null}).filter(i=>!!i);return n.common.async?Promise.all(s).then(i=>I.mergeArray(t,i)):I.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new q({...this._def,rest:e})}}q.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new q({items:r,typeName:S.ZodTuple,rest:null,...C(e)})};class we extends E{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==b.object)return _(n,{code:y.invalid_type,expected:b.object,received:n.parsedType}),k;const a=[],s=this._def.keyType,i=this._def.valueType;for(const o in n.data)a.push({key:s._parse(new K(n,o,n.path,o)),value:i._parse(new K(n,n.data[o],n.path,o)),alwaysSet:o in n.data});return n.common.async?I.mergeObjectAsync(t,a):I.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof E?new we({keyType:e,valueType:t,typeName:S.ZodRecord,...C(n)}):new we({keyType:U.create(),valueType:e,typeName:S.ZodRecord,...C(t)})}}class ze extends E{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==b.map)return _(n,{code:y.invalid_type,expected:b.map,received:n.parsedType}),k;const a=this._def.keyType,s=this._def.valueType,i=[...n.data.entries()].map(([o,m],h)=>({key:a._parse(new K(n,o,n.path,[h,"key"])),value:s._parse(new K(n,m,n.path,[h,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const m of i){const h=await m.key,v=await m.value;if(h.status==="aborted"||v.status==="aborted")return k;(h.status==="dirty"||v.status==="dirty")&&t.dirty(),o.set(h.value,v.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const m of i){const h=m.key,v=m.value;if(h.status==="aborted"||v.status==="aborted")return k;(h.status==="dirty"||v.status==="dirty")&&t.dirty(),o.set(h.value,v.value)}return{status:t.value,value:o}}}}ze.create=(r,e,t)=>new ze({valueType:e,keyType:r,typeName:S.ZodMap,...C(t)});class se extends E{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==b.set)return _(n,{code:y.invalid_type,expected:b.set,received:n.parsedType}),k;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(_(n,{code:y.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(_(n,{code:y.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const s=this._def.valueType;function i(m){const h=new Set;for(const v of m){if(v.status==="aborted")return k;v.status==="dirty"&&t.dirty(),h.add(v.value)}return{status:t.value,value:h}}const o=[...n.data.values()].map((m,h)=>s._parse(new K(n,m,n.path,h)));return n.common.async?Promise.all(o).then(m=>i(m)):i(o)}min(e,t){return new se({...this._def,minSize:{value:e,message:w.toString(t)}})}max(e,t){return new se({...this._def,maxSize:{value:e,message:w.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}se.create=(r,e)=>new se({valueType:r,minSize:null,maxSize:null,typeName:S.ZodSet,...C(e)});class ue extends E{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==b.function)return _(t,{code:y.invalid_type,expected:b.function,received:t.parsedType}),k;function n(o,m){return De({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Le(),le].filter(h=>!!h),issueData:{code:y.invalid_arguments,argumentsError:m}})}function a(o,m){return De({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Le(),le].filter(h=>!!h),issueData:{code:y.invalid_return_type,returnTypeError:m}})}const s={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof fe){const o=this;return $(async function(...m){const h=new L([]),v=await o._def.args.parseAsync(m,s).catch(x=>{throw h.addIssue(n(m,x)),h}),j=await Reflect.apply(i,this,v);return await o._def.returns._def.type.parseAsync(j,s).catch(x=>{throw h.addIssue(a(j,x)),h})})}else{const o=this;return $(function(...m){const h=o._def.args.safeParse(m,s);if(!h.success)throw new L([n(m,h.error)]);const v=Reflect.apply(i,this,h.data),j=o._def.returns.safeParse(v,s);if(!j.success)throw new L([a(v,j.error)]);return j.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ue({...this._def,args:q.create(e).rest(ne.create())})}returns(e){return new ue({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new ue({args:e||q.create([]).rest(ne.create()),returns:t||ne.create(),typeName:S.ZodFunction,...C(n)})}}class Se extends E{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Se.create=(r,e)=>new Se({getter:r,typeName:S.ZodLazy,...C(e)});class ke extends E{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return _(t,{received:t.data,code:y.invalid_literal,expected:this._def.value}),k}return{status:"valid",value:e.data}}get value(){return this._def.value}}ke.create=(r,e)=>new ke({value:r,typeName:S.ZodLiteral,...C(e)});function or(r,e){return new X({values:r,typeName:S.ZodEnum,...C(e)})}class X extends E{constructor(){super(...arguments),Me.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return _(t,{expected:T.joinValues(n),received:t.parsedType,code:y.invalid_type}),k}if(Xe(this,Me)||ar(this,Me,new Set(this._def.values)),!Xe(this,Me).has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return _(t,{received:t.data,code:y.invalid_enum_value,options:n}),k}return $(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return X.create(e,{...this._def,...t})}exclude(e,t=this._def){return X.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Me=new WeakMap;X.create=or;class je extends E{constructor(){super(...arguments),$e.set(this,void 0)}_parse(e){const t=T.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==b.string&&n.parsedType!==b.number){const a=T.objectValues(t);return _(n,{expected:T.joinValues(a),received:n.parsedType,code:y.invalid_type}),k}if(Xe(this,$e)||ar(this,$e,new Set(T.getValidEnumValues(this._def.values))),!Xe(this,$e).has(e.data)){const a=T.objectValues(t);return _(n,{received:n.data,code:y.invalid_enum_value,options:a}),k}return $(e.data)}get enum(){return this._def.values}}$e=new WeakMap;je.create=(r,e)=>new je({values:r,typeName:S.ZodNativeEnum,...C(e)});class fe extends E{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==b.promise&&t.common.async===!1)return _(t,{code:y.invalid_type,expected:b.promise,received:t.parsedType}),k;const n=t.parsedType===b.promise?t.data:Promise.resolve(t.data);return $(n.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}fe.create=(r,e)=>new fe({type:r,typeName:S.ZodPromise,...C(e)});class D extends E{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===S.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=this._def.effect||null,s={addIssue:i=>{_(n,i),i.fatal?t.abort():t.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),a.type==="preprocess"){const i=a.transform(n.data,s);if(n.common.async)return Promise.resolve(i).then(async o=>{if(t.value==="aborted")return k;const m=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return m.status==="aborted"?k:m.status==="dirty"||t.value==="dirty"?oe(m.value):m});{if(t.value==="aborted")return k;const o=this._def.schema._parseSync({data:i,path:n.path,parent:n});return o.status==="aborted"?k:o.status==="dirty"||t.value==="dirty"?oe(o.value):o}}if(a.type==="refinement"){const i=o=>{const m=a.refinement(o,s);if(n.common.async)return Promise.resolve(m);if(m instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?k:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?k:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(a.type==="transform")if(n.common.async===!1){const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!me(i))return i;const o=a.transform(i.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(i=>me(i)?Promise.resolve(a.transform(i.value,s)).then(o=>({status:t.value,value:o})):i);T.assertNever(a)}}D.create=(r,e,t)=>new D({schema:r,typeName:S.ZodEffects,effect:e,...C(t)});D.createWithPreprocess=(r,e,t)=>new D({schema:e,effect:{type:"preprocess",transform:r},typeName:S.ZodEffects,...C(t)});class V extends E{_parse(e){return this._getType(e)===b.undefined?$(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}V.create=(r,e)=>new V({innerType:r,typeName:S.ZodOptional,...C(e)});class ee extends E{_parse(e){return this._getType(e)===b.null?$(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ee.create=(r,e)=>new ee({innerType:r,typeName:S.ZodNullable,...C(e)});class Ee extends E{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===b.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ee.create=(r,e)=>new Ee({innerType:r,typeName:S.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...C(e)});class Ce extends E{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return ge(a)?a.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new L(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new L(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Ce.create=(r,e)=>new Ce({innerType:r,typeName:S.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...C(e)});class Ve extends E{_parse(e){if(this._getType(e)!==b.nan){const n=this._getOrReturnCtx(e);return _(n,{code:y.invalid_type,expected:b.nan,received:n.parsedType}),k}return{status:"valid",value:e.data}}}Ve.create=r=>new Ve({typeName:S.ZodNaN,...C(r)});const cr=Symbol("zod_brand");class tt extends E{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Te extends E{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?k:s.status==="dirty"?(t.dirty(),oe(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?k:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(e,t){return new Te({in:e,out:t,typeName:S.ZodPipeline})}}class Ne extends E{_parse(e){const t=this._def.innerType._parse(e),n=a=>(me(a)&&(a.value=Object.freeze(a.value)),a);return ge(t)?t.then(a=>n(a)):n(t)}unwrap(){return this._def.innerType}}Ne.create=(r,e)=>new Ne({innerType:r,typeName:S.ZodReadonly,...C(e)});function Et(r,e={},t){return r?de.create().superRefine((n,a)=>{var s,i;if(!r(n)){const o=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,m=(i=(s=o.fatal)!==null&&s!==void 0?s:t)!==null&&i!==void 0?i:!0,h=typeof o=="string"?{message:o}:o;a.addIssue({code:"custom",...h,fatal:m})}}):de.create()}const ur={object:A.lazycreate};var S;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(S||(S={}));const lr=(r,e={message:`Input not instance of ${r.name}`})=>Et(t=>t instanceof r,e),Ct=U.create,Nt=Y.create,dr=Ve.create,fr=Q.create,Tt=ye.create,hr=ae.create,pr=Ue.create,mr=ve.create,gr=_e.create,yr=de.create,vr=ne.create,_r=W.create,br=Be.create,xr=B.create,wr=A.create,Sr=A.strictCreate,kr=be.create,jr=qe.create,Er=xe.create,Cr=q.create,Nr=we.create,Tr=ze.create,Or=se.create,Rr=ue.create,Ar=Se.create,Pr=ke.create,Zr=X.create,Ir=je.create,Mr=fe.create,et=D.create,$r=V.create,Lr=ee.create,Dr=D.createWithPreprocess,Ur=Te.create,Br=()=>Ct().optional(),zr=()=>Nt().optional(),Vr=()=>Tt().optional(),qr={string:r=>U.create({...r,coerce:!0}),number:r=>Y.create({...r,coerce:!0}),boolean:r=>ye.create({...r,coerce:!0}),bigint:r=>Q.create({...r,coerce:!0}),date:r=>ae.create({...r,coerce:!0})},Fr=k;var l=Object.freeze({__proto__:null,defaultErrorMap:le,setErrorMap:rr,getErrorMap:Le,makeIssue:De,EMPTY_PATH:nr,addIssueToContext:_,ParseStatus:I,INVALID:k,DIRTY:oe,OK:$,isAborted:Ye,isDirty:Qe,isValid:me,isAsync:ge,get util(){return T},get objectUtil(){return He},ZodParsedType:b,getParsedType:H,ZodType:E,datetimeRegex:jt,ZodString:U,ZodNumber:Y,ZodBigInt:Q,ZodBoolean:ye,ZodDate:ae,ZodSymbol:Ue,ZodUndefined:ve,ZodNull:_e,ZodAny:de,ZodUnknown:ne,ZodNever:W,ZodVoid:Be,ZodArray:B,ZodObject:A,ZodUnion:be,ZodDiscriminatedUnion:qe,ZodIntersection:xe,ZodTuple:q,ZodRecord:we,ZodMap:ze,ZodSet:se,ZodFunction:ue,ZodLazy:Se,ZodLiteral:ke,ZodEnum:X,ZodNativeEnum:je,ZodPromise:fe,ZodEffects:D,ZodTransformer:D,ZodOptional:V,ZodNullable:ee,ZodDefault:Ee,ZodCatch:Ce,ZodNaN:Ve,BRAND:cr,ZodBranded:tt,ZodPipeline:Te,ZodReadonly:Ne,custom:Et,Schema:E,ZodSchema:E,late:ur,get ZodFirstPartyTypeKind(){return S},coerce:qr,any:yr,array:xr,bigint:fr,boolean:Tt,date:hr,discriminatedUnion:jr,effect:et,enum:Zr,function:Rr,instanceof:lr,intersection:Er,lazy:Ar,literal:Pr,map:Tr,nan:dr,nativeEnum:Ir,never:_r,null:gr,nullable:Lr,number:Nt,object:wr,oboolean:Vr,onumber:zr,optional:$r,ostring:Br,pipeline:Ur,preprocess:Dr,promise:Mr,record:Nr,set:Or,strictObject:Sr,string:Ct,symbol:pr,transformer:et,tuple:Cr,undefined:mr,union:kr,unknown:vr,void:br,NEVER:Fr,ZodIssueCode:y,quotelessJson:er,ZodError:L});const xn=Object.freeze(Object.defineProperty({__proto__:null,BRAND:cr,DIRTY:oe,EMPTY_PATH:nr,INVALID:k,NEVER:Fr,OK:$,ParseStatus:I,Schema:E,ZodAny:de,ZodArray:B,ZodBigInt:Q,ZodBoolean:ye,ZodBranded:tt,ZodCatch:Ce,ZodDate:ae,ZodDefault:Ee,ZodDiscriminatedUnion:qe,ZodEffects:D,ZodEnum:X,ZodError:L,get ZodFirstPartyTypeKind(){return S},ZodFunction:ue,ZodIntersection:xe,ZodIssueCode:y,ZodLazy:Se,ZodLiteral:ke,ZodMap:ze,ZodNaN:Ve,ZodNativeEnum:je,ZodNever:W,ZodNull:_e,ZodNullable:ee,ZodNumber:Y,ZodObject:A,ZodOptional:V,ZodParsedType:b,ZodPipeline:Te,ZodPromise:fe,ZodReadonly:Ne,ZodRecord:we,ZodSchema:E,ZodSet:se,ZodString:U,ZodSymbol:Ue,ZodTransformer:D,ZodTuple:q,ZodType:E,ZodUndefined:ve,ZodUnion:be,ZodUnknown:ne,ZodVoid:Be,addIssueToContext:_,any:yr,array:xr,bigint:fr,boolean:Tt,coerce:qr,custom:Et,date:hr,datetimeRegex:jt,default:l,defaultErrorMap:le,discriminatedUnion:jr,effect:et,enum:Zr,function:Rr,getErrorMap:Le,getParsedType:H,instanceof:lr,intersection:Er,isAborted:Ye,isAsync:ge,isDirty:Qe,isValid:me,late:ur,lazy:Ar,literal:Pr,makeIssue:De,map:Tr,nan:dr,nativeEnum:Ir,never:_r,null:gr,nullable:Lr,number:Nt,object:wr,get objectUtil(){return He},oboolean:Vr,onumber:zr,optional:$r,ostring:Br,pipeline:Ur,preprocess:Dr,promise:Mr,quotelessJson:er,record:Nr,set:Or,setErrorMap:rr,strictObject:Sr,string:Ct,symbol:pr,transformer:et,tuple:Cr,undefined:mr,union:kr,unknown:vr,get util(){return T},void:br,z:l},Symbol.toStringTag,{value:"Module"})),Ot=l.string().or(l.number()).or(l.boolean()).or(l.null()),wn=l.lazy(()=>l.array(Ot)),Sn=l.lazy(()=>l.record(Ot)),kn=l.union([Ot,wn,Sn]);l.object({name:l.string(),version:l.string(),description:l.string(),author:l.string(),license:l.string(),homepage:l.string().optional(),bugs:l.record(l.string()).optional(),repository:l.record(l.string()).optional(),dependencies:l.record(l.string()).optional(),devDependencies:l.record(l.string()).optional(),scripts:l.record(l.string()).optional(),private:l.boolean().optional(),type:l.string().optional(),keywords:l.array(l.string()).optional(),repositoryUrl:l.string().optional()});l.object({name:l.string(),version:l.string(),description:l.string(),author:l.string(),license:l.string(),homepage:l.string().optional(),bugs:l.record(l.string()).optional(),repository:l.record(l.string()).optional(),dependencies:l.record(l.string()),devDependencies:l.record(l.string()),scripts:l.record(l.string()),private:l.boolean(),type:l.string().optional(),keywords:l.array(l.string()),repositoryUrl:l.string().optional()});const jn=l.tuple([l.number(),l.number(),l.number(),l.number()]),En=l.tuple([l.number(),l.number(),l.number(),l.number(),l.number(),l.number()]),Rt=jn.or(En),Cn=l.object({type:l.literal("Polygon"),coordinates:l.array(l.array(l.array(l.number())))}),Nn=l.object({type:l.literal("MultiPolygon"),coordinates:l.array(l.array(l.array(l.array(l.number()))))}),Kr=l.object({type:l.literal("Feature"),geometry:Cn.or(Nn),id:l.string().or(l.number()).optional(),properties:l.record(l.any()).or(l.null()).nullable()});l.array(Kr);l.object({type:l.literal("FeatureCollection"),features:l.array(Kr)});const Tn=["vector","raster"],On=l.enum(Tn),Rn=["fgb","json","tif","subdivided"],An=l.enum(Rn),Pn=["quantitative","categorical"],Zn=l.enum(Pn),In=["nominal","ordinal","interval","ratio"];l.enum(In);const Mn=l.object({count:l.number().nullable().optional(),sum:l.number().nullable().optional(),area:l.number().nullable().optional()});l.record(Mn);const Wr=l.object({datasourceId:l.string(),geo_type:On,formats:l.array(An),precalc:l.boolean(),metadata:l.object({name:l.string(),description:l.string().optional(),version:l.string(),publisher:l.string(),publishDate:l.string(),publishLink:l.string()}).optional()}),At=Wr.merge(l.object({idProperty:l.string().optional(),nameProperty:l.string().optional(),propertyFilter:l.object({property:l.string(),values:l.array(l.string().or(l.number()))}).optional(),bboxFilter:Rt.optional(),layerName:l.string().optional(),classKeys:l.array(l.string())})),Pt=Wr.merge(l.object({measurementType:Zn,band:l.number(),noDataValue:l.number().optional()})),Jr=l.object({url:l.string()}),Zt=l.object({src:l.string()}),Gr=l.object({created:l.string(),lastUpdated:l.string()}),Hr=Zt.merge(l.object({propertiesToKeep:l.array(l.string()),explodeMulti:l.boolean()})),$n=At.merge(Gr).merge(Hr),Ln=At.and(Jr),Dn=Pt.merge(Gr).merge(Zt),Un=Pt.and(Jr),Bn=$n.or(Ln).or(Dn).or(Un);l.array(Bn);At.merge(Hr);Pt.merge(Zt);const zn=l.object({classId:l.string(),classKey:l.string().optional(),datasourceId:l.string().optional(),display:l.string(),numericClassId:l.number().optional(),layerId:l.string().optional(),objectiveId:l.string().optional()}),Vn=l.object({metricId:l.string(),type:l.string(),datasourceId:l.string().optional(),classKey:l.string().optional(),classes:l.array(zn),layerId:l.string().optional(),objectiveId:l.string().optional()});l.array(Vn);const qn=l.object({metricId:l.string(),value:l.number(),extra:l.record(kn).optional(),classId:l.string().nullable(),groupId:l.string().nullable(),geographyId:l.string().nullable(),sketchId:l.string().nullable()});l.array(qn);const Fn="yes",Kn="no",Wn="maybe",Jn=[Fn,Kn,Wn],Gn=l.enum(Jn),Hn=l.record(Gn),Yn=l.object({objectiveId:l.string(),shortDesc:l.string(),target:l.number().nonnegative(),countsToward:Hn});l.array(Yn);const Qn=l.object({name:l.string(),description:l.string(),source:l.string()});l.object({author:l.string(),organization:l.string().optional(),region:l.string(),geoprocessingFunctions:l.array(l.string()),preprocessingFunctions:l.array(l.string()),clients:l.array(Qn)});const Xn=["eez","other"],ea=l.enum(Xn);l.object({bbox:Rt,planningAreaType:ea,planningAreaId:l.string(),planningAreaName:l.string(),externalLinks:l.record(l.string())});l.object({geographies:l.array(l.string()).optional(),eezs:l.array(l.string()).optional()});const ta=l.object({geographyId:l.string(),datasourceId:l.string(),display:l.string(),layerId:l.string().optional(),groups:l.array(l.string()).optional(),precalc:l.boolean(),propertyFilter:l.object({property:l.string(),values:l.array(l.string().or(l.number()))}).optional(),bboxFilter:Rt.optional()});l.array(ta);/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function ra(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(h){return function(v){return m([h,v])}}function m(h){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,a&&(s=h[0]&2?a.return:h[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,h[1])).done)return s;switch(a=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,a=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){t.label=h[1];break}if(h[0]===6&&t.label<s[1]){t.label=s[1],s=h;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(h);break}s[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(r,t)}catch(v){h=[6,v],a=0}finally{n=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}var ie=function(){function r(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return r}();function na(r,e){return r>e?1:r<e?-1:0}function te(r,e,t){for(var n=new ie(null,null),a=n,s=n;;){var i=t(r,e.key);if(i<0){if(e.left===null)break;if(t(r,e.left.key)<0){var o=e.left;if(e.left=o.right,o.right=e,e=o,e.left===null)break}s.left=e,s=e,e=e.left}else if(i>0){if(e.right===null)break;if(t(r,e.right.key)>0){var o=e.right;if(e.right=o.left,o.left=e,e=o,e.right===null)break}a.right=e,a=e,e=e.right}else break}return a.right=e.left,s.left=e.right,e.left=n.right,e.right=n.left,e}function dt(r,e,t,n){var a=new ie(r,e);if(t===null)return a.left=a.right=null,a;t=te(r,t,n);var s=n(r,t.key);return s<0?(a.left=t.left,a.right=t,t.left=null):s>=0&&(a.right=t.right,a.left=t,t.right=null),a}function Ut(r,e,t){var n=null,a=null;if(e){e=te(r,e,t);var s=t(e.key,r);s===0?(n=e.left,a=e.right):s<0?(a=e.right,e.right=null,n=e):(n=e.left,e.left=null,a=e)}return{left:n,right:a}}function aa(r,e,t){return e===null?r:(r===null||(e=te(r.key,e,t),e.left=r),e)}function yt(r,e,t,n,a){if(r){n(""+e+(t?"└── ":"├── ")+a(r)+`
`);var s=e+(t?"    ":"│   ");r.left&&yt(r.left,s,!1,n,a),r.right&&yt(r.right,s,!0,n,a)}}var sa=function(){function r(e){e===void 0&&(e=na),this._root=null,this._size=0,this._comparator=e}return r.prototype.insert=function(e,t){return this._size++,this._root=dt(e,t,this._root,this._comparator)},r.prototype.add=function(e,t){var n=new ie(e,t);this._root===null&&(n.left=n.right=null,this._size++,this._root=n);var a=this._comparator,s=te(e,this._root,a),i=a(e,s.key);return i===0?this._root=s:(i<0?(n.left=s.left,n.right=s,s.left=null):i>0&&(n.right=s.right,n.left=s,s.right=null),this._size++,this._root=n),this._root},r.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},r.prototype._remove=function(e,t,n){var a;if(t===null)return null;t=te(e,t,n);var s=n(e,t.key);return s===0?(t.left===null?a=t.right:(a=te(e,t.left,n),a.right=t.right),this._size--,a):t},r.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=te(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},r.prototype.findStatic=function(e){for(var t=this._root,n=this._comparator;t;){var a=n(e,t.key);if(a===0)return t;a<0?t=t.left:t=t.right}return null},r.prototype.find=function(e){return this._root&&(this._root=te(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},r.prototype.contains=function(e){for(var t=this._root,n=this._comparator;t;){var a=n(e,t.key);if(a===0)return!0;a<0?t=t.left:t=t.right}return!1},r.prototype.forEach=function(e,t){for(var n=this._root,a=[],s=!1;!s;)n!==null?(a.push(n),n=n.left):a.length!==0?(n=a.pop(),e.call(t,n),n=n.right):s=!0;return this},r.prototype.range=function(e,t,n,a){for(var s=[],i=this._comparator,o=this._root,m;s.length!==0||o;)if(o)s.push(o),o=o.left;else{if(o=s.pop(),m=i(o.key,t),m>0)break;if(i(o.key,e)>=0&&n.call(a,o))return this;o=o.right}return this},r.prototype.keys=function(){var e=[];return this.forEach(function(t){var n=t.key;return e.push(n)}),e},r.prototype.values=function(){var e=[];return this.forEach(function(t){var n=t.data;return e.push(n)}),e},r.prototype.min=function(){return this._root?this.minNode(this._root).key:null},r.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},r.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},r.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},r.prototype.at=function(e){for(var t=this._root,n=!1,a=0,s=[];!n;)if(t)s.push(t),t=t.left;else if(s.length>0){if(t=s.pop(),a===e)return t;a++,t=t.right}else n=!0;return null},r.prototype.next=function(e){var t=this._root,n=null;if(e.right){for(n=e.right;n.left;)n=n.left;return n}for(var a=this._comparator;t;){var s=a(e.key,t.key);if(s===0)break;s<0?(n=t,t=t.left):t=t.right}return n},r.prototype.prev=function(e){var t=this._root,n=null;if(e.left!==null){for(n=e.left;n.right;)n=n.right;return n}for(var a=this._comparator;t;){var s=a(e.key,t.key);if(s===0)break;s<0?t=t.left:(n=t,t=t.right)}return n},r.prototype.clear=function(){return this._root=null,this._size=0,this},r.prototype.toList=function(){return oa(this._root)},r.prototype.load=function(e,t,n){t===void 0&&(t=[]),n===void 0&&(n=!1);var a=e.length,s=this._comparator;if(n&&bt(e,t,0,a-1,s),this._root===null)this._root=vt(e,t,0,a),this._size=a;else{var i=ca(this.toList(),ia(e,t),s);a=this._size+a,this._root=_t({head:i},0,a)}return this},r.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(r.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),r.prototype.toString=function(e){e===void 0&&(e=function(n){return String(n.key)});var t=[];return yt(this._root,"",!0,function(n){return t.push(n)},e),t.join("")},r.prototype.update=function(e,t,n){var a=this._comparator,s=Ut(e,this._root,a),i=s.left,o=s.right;a(e,t)<0?o=dt(t,n,o,a):i=dt(t,n,i,a),this._root=aa(i,o,a)},r.prototype.split=function(e){return Ut(e,this._root,this._comparator)},r.prototype[Symbol.iterator]=function(){var e,t,n;return ra(this,function(a){switch(a.label){case 0:e=this._root,t=[],n=!1,a.label=1;case 1:return n?[3,6]:e===null?[3,2]:(t.push(e),e=e.left,[3,5]);case 2:return t.length===0?[3,4]:(e=t.pop(),[4,e]);case 3:return a.sent(),e=e.right,[3,5];case 4:n=!0,a.label=5;case 5:return[3,1];case 6:return[2]}})},r}();function vt(r,e,t,n){var a=n-t;if(a>0){var s=t+Math.floor(a/2),i=r[s],o=e[s],m=new ie(i,o);return m.left=vt(r,e,t,s),m.right=vt(r,e,s+1,n),m}return null}function ia(r,e){for(var t=new ie(null,null),n=t,a=0;a<r.length;a++)n=n.next=new ie(r[a],e[a]);return n.next=null,t.next}function oa(r){for(var e=r,t=[],n=!1,a=new ie(null,null),s=a;!n;)e?(t.push(e),e=e.left):t.length>0?(e=s=s.next=t.pop(),e=e.right):n=!0;return s.next=null,a.next}function _t(r,e,t){var n=t-e;if(n>0){var a=e+Math.floor(n/2),s=_t(r,e,a),i=r.head;return i.left=s,r.head=r.head.next,i.right=_t(r,a+1,t),i}return null}function ca(r,e,t){for(var n=new ie(null,null),a=n,s=r,i=e;s!==null&&i!==null;)t(s.key,i.key)<0?(a.next=s,s=s.next):(a.next=i,i=i.next),a=a.next;return s!==null?a.next=s:i!==null&&(a.next=i),n.next}function bt(r,e,t,n,a){if(!(t>=n)){for(var s=r[t+n>>1],i=t-1,o=n+1;;){do i++;while(a(r[i],s)<0);do o--;while(a(r[o],s)>0);if(i>=o)break;var m=r[i];r[i]=r[o],r[o]=m,m=e[i],e[i]=e[o],e[o]=m}bt(r,e,t,o,a),bt(r,e,o+1,n,a)}}let re=Number.EPSILON;re===void 0&&(re=Math.pow(2,-52));const ua=re*re,Bt=(r,e)=>{if(-re<r&&r<re&&-re<e&&e<re)return 0;const t=r-e;return t*t<ua*r*e?0:r<e?-1:1};class la{constructor(){this.reset()}reset(){this.xRounder=new zt,this.yRounder=new zt}round(e,t){return{x:this.xRounder.round(e),y:this.yRounder.round(t)}}}class zt{constructor(){this.tree=new sa,this.round(0)}round(e){const t=this.tree.add(e),n=this.tree.prev(t);if(n!==null&&Bt(t.key,n.key)===0)return this.tree.remove(e),n.key;const a=this.tree.next(t);return a!==null&&Bt(t.key,a.key)===0?(this.tree.remove(e),a.key):e}}new la;var da={},ft={},rt={},Fe={},ht={},nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.getZodPathArray=void 0;function fa(r){return["[",...r.map(t=>typeof t=="string"?`"${t}"`:t).join(", "),"]"].join("")}nt.getZodPathArray=fa;var Oe={},Vt;function ha(){if(Vt)return Oe;Vt=1,Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.getPathString=void 0;const r=It();function e(t,n){if((n==null?void 0:n.enabled)===void 0)return(0,r.getObjectNotation)(t,{enabled:!0,type:"objectNotation"});if(n.enabled===!1)return"";switch(n.type){case"zodPathArray":return(0,r.getZodPathArray)(t);case"breadcrumbs":return(0,r.getBreadcrumbs)(t,n);case"objectNotation":default:return(0,r.getObjectNotation)(t,n)}}return Oe.getPathString=e,Oe}var at={};Object.defineProperty(at,"__esModule",{value:!0});at.getObjectNotation=void 0;function pa(r,e){var t;const n=(t=e.arraySquareBrackets)!==null&&t!==void 0?t:!0;return r.reduce((a,s)=>typeof s=="number"&&n?`${a}[${s}]`:[a,s].filter(i=>typeof i=="number"||!!i).join("."),"")}at.getObjectNotation=pa;var Re={},qt;function ma(){if(qt)return Re;qt=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.getErrorMessage=void 0;const r=It();function e(t,n,a){var s,i,o,m,h,v,j,R,x,O;const J=(0,r.getComponentDelimiter)((s=a==null?void 0:a.delimiter)===null||s===void 0?void 0:s.component),N=(0,r.getComponentLabels)(a),g=[];let p=`${N.code}${t.code}`;((o=(i=a==null?void 0:a.code)===null||i===void 0?void 0:i.enabled)!==null&&o!==void 0?o:!0)&&(!((m=a==null?void 0:a.code)===null||m===void 0)&&m.enabled&&a.code.transform&&(p=a.code.transform({component:p,label:N.code,value:t.code})),g.push(p));const c=(0,r.getPathString)(t.path,a==null?void 0:a.path);let f=`${N.path}${c}`;((v=(h=a==null?void 0:a.path)===null||h===void 0?void 0:h.enabled)!==null&&v!==void 0?v:!0)&&(!((j=a==null?void 0:a.path)===null||j===void 0)&&j.enabled&&a.path.transform&&(f=a.path.transform({component:f,label:N.path,value:c})),g.push(f));let Z=`${N.message}${t.message}`;((x=(R=a==null?void 0:a.message)===null||R===void 0?void 0:R.enabled)!==null&&x!==void 0?x:!0)&&(!((O=a==null?void 0:a.message)===null||O===void 0)&&O.enabled&&a.message.transform&&(Z=a.message.transform({component:Z,label:N.message,value:t.message})),g.push(Z));const z=g.join(J);return a!=null&&a.transform?a.transform({pathComponent:f,messageComponent:Z,issue:t,index:n,errorMessage:z,codeComponent:p}):z}return Re.getErrorMessage=e,Re}var st={};Object.defineProperty(st,"__esModule",{value:!0});st.getErrorDelimiter=void 0;function ga(r){return r??" | "}st.getErrorDelimiter=ga;var it={},ot={};Object.defineProperty(ot,"__esModule",{value:!0});ot.getLabel=void 0;function ya(r,e){return r===void 0?e:r.enabled===!1?"":r.label===void 0?e:r.label===null?"":r.label}ot.getLabel=ya;Object.defineProperty(it,"__esModule",{value:!0});it.getComponentLabels=void 0;const pt=ot;function va(r){const e=(0,pt.getLabel)(r==null?void 0:r.code,"Code: "),t=(0,pt.getLabel)(r==null?void 0:r.message,"Message: "),n=(0,pt.getLabel)(r==null?void 0:r.path,"Path: ");return{code:e,message:t,path:n}}it.getComponentLabels=va;var ct={};Object.defineProperty(ct,"__esModule",{value:!0});ct.getComponentDelimiter=void 0;function _a(r){return r??" ~ "}ct.getComponentDelimiter=_a;var ut={};Object.defineProperty(ut,"__esModule",{value:!0});ut.getBreadcrumbs=void 0;function ba(r,e){var t,n;const a=(t=e.arraySquareBrackets)!==null&&t!==void 0?t:!0,s=(n=e.delimeter)!==null&&n!==void 0?n:" > ";return r.map(i=>typeof i=="number"&&a?`[${i}]`:i).join(s)}ut.getBreadcrumbs=ba;var Ft;function It(){return Ft||(Ft=1,function(r){var e=M&&M.__createBinding||(Object.create?function(n,a,s,i){i===void 0&&(i=s);var o=Object.getOwnPropertyDescriptor(a,s);(!o||("get"in o?!a.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,i,o)}:function(n,a,s,i){i===void 0&&(i=s),n[i]=a[s]}),t=M&&M.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(nt,r),t(ha(),r),t(at,r),t(ma(),r),t(st,r),t(it,r),t(ct,r),t(ut,r)}(ht)),ht}Object.defineProperty(Fe,"__esModule",{value:!0});Fe.generateErrorMessage=void 0;const Kt=It();function xa(r,e){var t,n,a;const s=(0,Kt.getErrorDelimiter)((t=e==null?void 0:e.delimiter)===null||t===void 0?void 0:t.error),i=r.slice(0,e==null?void 0:e.maxErrors).map((o,m)=>(0,Kt.getErrorMessage)(o,m,e)).join(s);return`${(n=e==null?void 0:e.prefix)!==null&&n!==void 0?n:""}${i}${(a=e==null?void 0:e.suffix)!==null&&a!==void 0?a:""}`}Fe.generateErrorMessage=xa;const wa=tn(xn);Object.defineProperty(rt,"__esModule",{value:!0});rt.generateError=void 0;const Sa=Fe,ka=wa;function ja(r,e){if(r instanceof ka.z.ZodError){const t=(0,Sa.generateErrorMessage)(r.issues,e);return new Error(t)}return r instanceof Error?r:new Error("Unknown error")}rt.generateError=ja;var Ae={},Wt;function Ea(){if(Wt)return Ae;Wt=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.parse=void 0;const r=Ke();function e(t,n,a){const s=t.safeParse(n);if(!s.success){const i=(0,r.generateErrorMessage)(s.error.issues,a);throw new Error(i)}return s.data}return Ae.parse=e,Ae}var Pe={},Jt;function Ca(){if(Jt)return Pe;Jt=1;var r=M&&M.__awaiter||function(n,a,s,i){function o(m){return m instanceof s?m:new s(function(h){h(m)})}return new(s||(s=Promise))(function(m,h){function v(x){try{R(i.next(x))}catch(O){h(O)}}function j(x){try{R(i.throw(x))}catch(O){h(O)}}function R(x){x.done?m(x.value):o(x.value).then(v,j)}R((i=i.apply(n,a||[])).next())})};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.parseAsync=void 0;const e=Ke();function t(n,a,s){return r(this,void 0,void 0,function*(){const i=yield n.safeParseAsync(a);if(!i.success){const o=(0,e.generateErrorMessage)(i.error.issues,s);throw new Error(o)}return i.data})}return Pe.parseAsync=t,Pe}var Ze={},Gt;function Na(){if(Gt)return Ze;Gt=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.safeParse=void 0;const r=Ke();function e(t,n,a){const s=t.safeParse(n);return s.success?{success:!0,data:s.data}:{success:!1,error:{message:(0,r.generateErrorMessage)(s.error.issues,a)}}}return Ze.safeParse=e,Ze}var Ie={},Ht;function Ta(){if(Ht)return Ie;Ht=1;var r=M&&M.__awaiter||function(n,a,s,i){function o(m){return m instanceof s?m:new s(function(h){h(m)})}return new(s||(s=Promise))(function(m,h){function v(x){try{R(i.next(x))}catch(O){h(O)}}function j(x){try{R(i.throw(x))}catch(O){h(O)}}function R(x){x.done?m(x.value):o(x.value).then(v,j)}R((i=i.apply(n,a||[])).next())})};Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.safeParseAsync=void 0;const e=Ke();function t(n,a,s){return r(this,void 0,void 0,function*(){const i=yield n.safeParseAsync(a);return i.success?{success:!0,data:i.data}:{success:!1,error:{message:(0,e.generateErrorMessage)(i.error.issues,s)}}})}return Ie.safeParseAsync=t,Ie}var Yt;function Ke(){return Yt||(Yt=1,function(r){var e=M&&M.__createBinding||(Object.create?function(n,a,s,i){i===void 0&&(i=s);var o=Object.getOwnPropertyDescriptor(a,s);(!o||("get"in o?!a.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,i,o)}:function(n,a,s,i){i===void 0&&(i=s),n[i]=a[s]}),t=M&&M.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(rt,r),t(Fe,r),t(Ea(),r),t(Ca(),r),t(Na(),r),t(Ta(),r)}(ft)),ft}var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});(function(r){var e=M&&M.__createBinding||(Object.create?function(n,a,s,i){i===void 0&&(i=s);var o=Object.getOwnPropertyDescriptor(a,s);(!o||("get"in o?!a.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,i,o)}:function(n,a,s,i){i===void 0&&(i=s),n[i]=a[s]}),t=M&&M.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(Ke(),r),t(Yr,r)})(da);var Qr={exports:{}};(function(r,e){(function(t){r.exports=t()})(function(t){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function a(g,p){var u=g[0],c=g[1],f=g[2],d=g[3];u+=(c&f|~c&d)+p[0]-680876936|0,u=(u<<7|u>>>25)+c|0,d+=(u&c|~u&f)+p[1]-389564586|0,d=(d<<12|d>>>20)+u|0,f+=(d&u|~d&c)+p[2]+606105819|0,f=(f<<17|f>>>15)+d|0,c+=(f&d|~f&u)+p[3]-1044525330|0,c=(c<<22|c>>>10)+f|0,u+=(c&f|~c&d)+p[4]-176418897|0,u=(u<<7|u>>>25)+c|0,d+=(u&c|~u&f)+p[5]+1200080426|0,d=(d<<12|d>>>20)+u|0,f+=(d&u|~d&c)+p[6]-1473231341|0,f=(f<<17|f>>>15)+d|0,c+=(f&d|~f&u)+p[7]-45705983|0,c=(c<<22|c>>>10)+f|0,u+=(c&f|~c&d)+p[8]+1770035416|0,u=(u<<7|u>>>25)+c|0,d+=(u&c|~u&f)+p[9]-1958414417|0,d=(d<<12|d>>>20)+u|0,f+=(d&u|~d&c)+p[10]-42063|0,f=(f<<17|f>>>15)+d|0,c+=(f&d|~f&u)+p[11]-1990404162|0,c=(c<<22|c>>>10)+f|0,u+=(c&f|~c&d)+p[12]+1804603682|0,u=(u<<7|u>>>25)+c|0,d+=(u&c|~u&f)+p[13]-40341101|0,d=(d<<12|d>>>20)+u|0,f+=(d&u|~d&c)+p[14]-1502002290|0,f=(f<<17|f>>>15)+d|0,c+=(f&d|~f&u)+p[15]+1236535329|0,c=(c<<22|c>>>10)+f|0,u+=(c&d|f&~d)+p[1]-165796510|0,u=(u<<5|u>>>27)+c|0,d+=(u&f|c&~f)+p[6]-1069501632|0,d=(d<<9|d>>>23)+u|0,f+=(d&c|u&~c)+p[11]+643717713|0,f=(f<<14|f>>>18)+d|0,c+=(f&u|d&~u)+p[0]-373897302|0,c=(c<<20|c>>>12)+f|0,u+=(c&d|f&~d)+p[5]-701558691|0,u=(u<<5|u>>>27)+c|0,d+=(u&f|c&~f)+p[10]+38016083|0,d=(d<<9|d>>>23)+u|0,f+=(d&c|u&~c)+p[15]-660478335|0,f=(f<<14|f>>>18)+d|0,c+=(f&u|d&~u)+p[4]-405537848|0,c=(c<<20|c>>>12)+f|0,u+=(c&d|f&~d)+p[9]+568446438|0,u=(u<<5|u>>>27)+c|0,d+=(u&f|c&~f)+p[14]-1019803690|0,d=(d<<9|d>>>23)+u|0,f+=(d&c|u&~c)+p[3]-187363961|0,f=(f<<14|f>>>18)+d|0,c+=(f&u|d&~u)+p[8]+1163531501|0,c=(c<<20|c>>>12)+f|0,u+=(c&d|f&~d)+p[13]-1444681467|0,u=(u<<5|u>>>27)+c|0,d+=(u&f|c&~f)+p[2]-51403784|0,d=(d<<9|d>>>23)+u|0,f+=(d&c|u&~c)+p[7]+1735328473|0,f=(f<<14|f>>>18)+d|0,c+=(f&u|d&~u)+p[12]-1926607734|0,c=(c<<20|c>>>12)+f|0,u+=(c^f^d)+p[5]-378558|0,u=(u<<4|u>>>28)+c|0,d+=(u^c^f)+p[8]-2022574463|0,d=(d<<11|d>>>21)+u|0,f+=(d^u^c)+p[11]+1839030562|0,f=(f<<16|f>>>16)+d|0,c+=(f^d^u)+p[14]-35309556|0,c=(c<<23|c>>>9)+f|0,u+=(c^f^d)+p[1]-1530992060|0,u=(u<<4|u>>>28)+c|0,d+=(u^c^f)+p[4]+1272893353|0,d=(d<<11|d>>>21)+u|0,f+=(d^u^c)+p[7]-155497632|0,f=(f<<16|f>>>16)+d|0,c+=(f^d^u)+p[10]-1094730640|0,c=(c<<23|c>>>9)+f|0,u+=(c^f^d)+p[13]+681279174|0,u=(u<<4|u>>>28)+c|0,d+=(u^c^f)+p[0]-358537222|0,d=(d<<11|d>>>21)+u|0,f+=(d^u^c)+p[3]-722521979|0,f=(f<<16|f>>>16)+d|0,c+=(f^d^u)+p[6]+76029189|0,c=(c<<23|c>>>9)+f|0,u+=(c^f^d)+p[9]-640364487|0,u=(u<<4|u>>>28)+c|0,d+=(u^c^f)+p[12]-421815835|0,d=(d<<11|d>>>21)+u|0,f+=(d^u^c)+p[15]+530742520|0,f=(f<<16|f>>>16)+d|0,c+=(f^d^u)+p[2]-995338651|0,c=(c<<23|c>>>9)+f|0,u+=(f^(c|~d))+p[0]-198630844|0,u=(u<<6|u>>>26)+c|0,d+=(c^(u|~f))+p[7]+1126891415|0,d=(d<<10|d>>>22)+u|0,f+=(u^(d|~c))+p[14]-1416354905|0,f=(f<<15|f>>>17)+d|0,c+=(d^(f|~u))+p[5]-57434055|0,c=(c<<21|c>>>11)+f|0,u+=(f^(c|~d))+p[12]+1700485571|0,u=(u<<6|u>>>26)+c|0,d+=(c^(u|~f))+p[3]-1894986606|0,d=(d<<10|d>>>22)+u|0,f+=(u^(d|~c))+p[10]-1051523|0,f=(f<<15|f>>>17)+d|0,c+=(d^(f|~u))+p[1]-2054922799|0,c=(c<<21|c>>>11)+f|0,u+=(f^(c|~d))+p[8]+1873313359|0,u=(u<<6|u>>>26)+c|0,d+=(c^(u|~f))+p[15]-30611744|0,d=(d<<10|d>>>22)+u|0,f+=(u^(d|~c))+p[6]-1560198380|0,f=(f<<15|f>>>17)+d|0,c+=(d^(f|~u))+p[13]+1309151649|0,c=(c<<21|c>>>11)+f|0,u+=(f^(c|~d))+p[4]-145523070|0,u=(u<<6|u>>>26)+c|0,d+=(c^(u|~f))+p[11]-1120210379|0,d=(d<<10|d>>>22)+u|0,f+=(u^(d|~c))+p[2]+718787259|0,f=(f<<15|f>>>17)+d|0,c+=(d^(f|~u))+p[9]-343485551|0,c=(c<<21|c>>>11)+f|0,g[0]=u+g[0]|0,g[1]=c+g[1]|0,g[2]=f+g[2]|0,g[3]=d+g[3]|0}function s(g){var p=[],u;for(u=0;u<64;u+=4)p[u>>2]=g.charCodeAt(u)+(g.charCodeAt(u+1)<<8)+(g.charCodeAt(u+2)<<16)+(g.charCodeAt(u+3)<<24);return p}function i(g){var p=[],u;for(u=0;u<64;u+=4)p[u>>2]=g[u]+(g[u+1]<<8)+(g[u+2]<<16)+(g[u+3]<<24);return p}function o(g){var p=g.length,u=[1732584193,-271733879,-1732584194,271733878],c,f,d,Z,F,z;for(c=64;c<=p;c+=64)a(u,s(g.substring(c-64,c)));for(g=g.substring(c-64),f=g.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=0;c<f;c+=1)d[c>>2]|=g.charCodeAt(c)<<(c%4<<3);if(d[c>>2]|=128<<(c%4<<3),c>55)for(a(u,d),c=0;c<16;c+=1)d[c]=0;return Z=p*8,Z=Z.toString(16).match(/(.*?)(.{0,8})$/),F=parseInt(Z[2],16),z=parseInt(Z[1],16)||0,d[14]=F,d[15]=z,a(u,d),u}function m(g){var p=g.length,u=[1732584193,-271733879,-1732584194,271733878],c,f,d,Z,F,z;for(c=64;c<=p;c+=64)a(u,i(g.subarray(c-64,c)));for(g=c-64<p?g.subarray(c-64):new Uint8Array(0),f=g.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=0;c<f;c+=1)d[c>>2]|=g[c]<<(c%4<<3);if(d[c>>2]|=128<<(c%4<<3),c>55)for(a(u,d),c=0;c<16;c+=1)d[c]=0;return Z=p*8,Z=Z.toString(16).match(/(.*?)(.{0,8})$/),F=parseInt(Z[2],16),z=parseInt(Z[1],16)||0,d[14]=F,d[15]=z,a(u,d),u}function h(g){var p="",u;for(u=0;u<4;u+=1)p+=n[g>>u*8+4&15]+n[g>>u*8&15];return p}function v(g){var p;for(p=0;p<g.length;p+=1)g[p]=h(g[p]);return g.join("")}v(o("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function g(p,u){return p=p|0||0,p<0?Math.max(p+u,0):Math.min(p,u)}ArrayBuffer.prototype.slice=function(p,u){var c=this.byteLength,f=g(p,c),d=c,Z,F,z,Lt;return u!==t&&(d=g(u,c)),f>d?new ArrayBuffer(0):(Z=d-f,F=new ArrayBuffer(Z),z=new Uint8Array(F),Lt=new Uint8Array(this,f,Z),z.set(Lt),F)}}();function j(g){return/[\u0080-\uFFFF]/.test(g)&&(g=unescape(encodeURIComponent(g))),g}function R(g,p){var u=g.length,c=new ArrayBuffer(u),f=new Uint8Array(c),d;for(d=0;d<u;d+=1)f[d]=g.charCodeAt(d);return p?f:c}function x(g){return String.fromCharCode.apply(null,new Uint8Array(g))}function O(g,p,u){var c=new Uint8Array(g.byteLength+p.byteLength);return c.set(new Uint8Array(g)),c.set(new Uint8Array(p),g.byteLength),c}function J(g){var p=[],u=g.length,c;for(c=0;c<u-1;c+=2)p.push(parseInt(g.substr(c,2),16));return String.fromCharCode.apply(String,p)}function N(){this.reset()}return N.prototype.append=function(g){return this.appendBinary(j(g)),this},N.prototype.appendBinary=function(g){this._buff+=g,this._length+=g.length;var p=this._buff.length,u;for(u=64;u<=p;u+=64)a(this._hash,s(this._buff.substring(u-64,u)));return this._buff=this._buff.substring(u-64),this},N.prototype.end=function(g){var p=this._buff,u=p.length,c,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d;for(c=0;c<u;c+=1)f[c>>2]|=p.charCodeAt(c)<<(c%4<<3);return this._finish(f,u),d=v(this._hash),g&&(d=J(d)),this.reset(),d},N.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},N.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},N.prototype.setState=function(g){return this._buff=g.buff,this._length=g.length,this._hash=g.hash,this},N.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},N.prototype._finish=function(g,p){var u=p,c,f,d;if(g[u>>2]|=128<<(u%4<<3),u>55)for(a(this._hash,g),u=0;u<16;u+=1)g[u]=0;c=this._length*8,c=c.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(c[2],16),d=parseInt(c[1],16)||0,g[14]=f,g[15]=d,a(this._hash,g)},N.hash=function(g,p){return N.hashBinary(j(g),p)},N.hashBinary=function(g,p){var u=o(g),c=v(u);return p?J(c):c},N.ArrayBuffer=function(){this.reset()},N.ArrayBuffer.prototype.append=function(g){var p=O(this._buff.buffer,g),u=p.length,c;for(this._length+=g.byteLength,c=64;c<=u;c+=64)a(this._hash,i(p.subarray(c-64,c)));return this._buff=c-64<u?new Uint8Array(p.buffer.slice(c-64)):new Uint8Array(0),this},N.ArrayBuffer.prototype.end=function(g){var p=this._buff,u=p.length,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f,d;for(f=0;f<u;f+=1)c[f>>2]|=p[f]<<(f%4<<3);return this._finish(c,u),d=v(this._hash),g&&(d=J(d)),this.reset(),d},N.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},N.ArrayBuffer.prototype.getState=function(){var g=N.prototype.getState.call(this);return g.buff=x(g.buff),g},N.ArrayBuffer.prototype.setState=function(g){return g.buff=R(g.buff,!0),N.prototype.setState.call(this,g)},N.ArrayBuffer.prototype.destroy=N.prototype.destroy,N.ArrayBuffer.prototype._finish=N.prototype._finish,N.ArrayBuffer.hash=function(g,p){var u=m(new Uint8Array(g)),c=v(u);return p?J(c):c},N})})(Qr);var Oa=Qr.exports;const Ra=St(Oa);var Aa=function r(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?r(e.toJSON()):Array.isArray(e)?`[${e.reduce((a,s,i)=>`${a}${i===0?"":","}${r(s===void 0||typeof s=="symbol"?null:s)}`,"")}]`:`{${Object.keys(e).sort().reduce((n,a)=>{if(e[a]===void 0||typeof e[a]=="symbol")return n;const s=n.length===0?"":",";return`${n}${s}${r(a)}:${r(e[a])}`},"")}}`};const Pa=St(Aa),Za=(r,e={})=>{let t=`${r.id}-${r.updatedAt}`;if(Object.keys(e).length>0){const n=Pa(e),a=Ra.hash(JSON.stringify(n));t=`${t}-${a}`}return t};var pe=(r=>(r.Pending="pending",r.Completed="completed",r.Failed="failed",r))(pe||{}),Ia=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,a,s;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(a=n;a--!==0;)if(!r(e[a],t[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[a]))return!1;for(a=n;a--!==0;){var i=s[a];if(!r(e[i],t[i]))return!1}return!0}return e!==e&&t!==t};const Ma=St(Ia);function $a(r){const e=ce.useRef(void 0);return Ma(e.current,r)||(e.current=r),e.current}const Mt=async(r,e,t,n,a)=>{const s=new URL(r);s.searchParams.append("geometryUri",e.geometryUri),s.searchParams.append("extraParams",e.extraParams||"{}"),s.searchParams.append("cacheKey",e.cacheKey||""),n&&(s.searchParams.append("checkCacheOnly","true"),s.searchParams.append("onConnect",""+a));const o=await(await fetch(s.toString(),{signal:t,method:"get",headers:{"Content-Type":"application/json"}})).json();if(t.aborted)throw new Error("Request aborted");return o},La=async(r,e,t,n,a,s)=>{Mt(r,e,t.signal,!0,!1).then(o=>{o.data!==void 0&&o.data&&(n({loading:!1,task:o,error:o.error}),s.close(1e3,a))})},xt=new Map,wt=(r,e)=>`${r}-${e}`;let We=[],Je=[],Ge={};const Da=(r,e={})=>{const t=ce.useContext(kt);if(!t)throw new Error("ReportContext not set.");const[n,a]=ce.useState({loading:!0}),s=$a(e);let i;return ce.useEffect(()=>{const o=new AbortController;if(a({loading:!0}),t.exampleOutputs){const m=t.exampleOutputs.find(h=>h.functionName===r);!m&&!t.simulateLoading&&!t.simulateError&&a({loading:!1,error:`Could not find example data for sketch "${t.sketchProperties.name}" and function "${r}". Run \`npm test\` to generate example outputs`}),a({loading:t.simulateLoading?t.simulateLoading:!1,task:{id:"abc123",location:"https://localhost/abc123",service:"https://localhost",logUriTemplate:"https://localhost/logs/abc123",geometryUri:"https://localhost/geometry/abc123",wss:"",status:pe.Completed,startedAt:new Date().toISOString(),duration:0,data:(m||{}).results,error:t.simulateError?t.simulateError:void 0,estimate:0},error:t.simulateError?t.simulateError:void 0})}else{if(!t.projectUrl&&t.geometryUri){a({loading:!1,error:"Client Error - ReportContext.projectUrl not specified"});return}(async()=>{let m;try{m=await Ba(t.projectUrl,o.signal)}catch{if(!o.signal.aborted){a({loading:!1,error:`Fetch of GeoprocessingProject metadata failed ${t.projectUrl}`});return}}let h,v;if(/^https:/.test(r))h=r;else{const x=m.geoprocessingServices.find(O=>O.title===r);if(!x){a({loading:!1,error:`Could not find service for function titled ${r}`});return}h=x.endpoint,v=x==null?void 0:x.executionMode}const j={geometryUri:t.geometryUri,extraParams:JSON.stringify(e)};if(t.sketchProperties.id&&t.sketchProperties.updatedAt&&(j.cacheKey=Za(t.sketchProperties,e)),j.cacheKey){let x=wt(r,j.cacheKey),O=xt.get(x);if(O){a({loading:!1,task:O,error:O.error});return}}let R;if(j.cacheKey){const x=We.find(O=>O.cacheKey===j.cacheKey&&O.functionName===r);x&&(a({loading:!0,task:x.task,error:void 0}),R=x.promise)}if(!R&&(a({loading:!0,task:void 0,error:void 0}),R=Mt(h,j,o.signal,!1,!1),j.cacheKey)){const x={cacheKey:j.cacheKey,functionName:r,promise:R};We.push(x),R.finally(()=>{We=We.filter(O=>O!==x)})}R.then(x=>{var J,N;let O=x.service;if(O&&x.status!=="completed"&&((J=x.wss)==null?void 0:J.length)>0&&v==="async"){let g=encodeURIComponent(O),p=encodeURIComponent(j.cacheKey||""),u=x.wss+"?serviceName="+g+"&cacheKey="+p+"&fromClient=true";Ua(x,u,a,j.cacheKey,h,j,r,o,i)}if(!x.status||["pending","completed","failed"].indexOf(x.status)===-1){a({loading:!1,task:x,error:"Could not parse response from geoprocessing function."});return}if(a({loading:x.status===pe.Pending,task:x,error:x.error}),j.cacheKey&&x.status===pe.Completed){let g=wt(r,j.cacheKey);xt.set(g,nn(x))}if(x.status===pe.Pending){((N=x.wss)==null?void 0:N.length)>0&&a({loading:!0,task:x,error:x.error});return}}).catch(x=>{o.signal.aborted||a({loading:!1,error:x.toString()})})})()}return()=>{o.abort()}},[t.geometryUri,t.sketchProperties,r,s]),n},Ua=(r,e,t,n,a,s,i,o,m)=>(m===void 0&&(m=new WebSocket(e)),m.onopen=function(){const h=xt.get(wt(i,n));if(h){t({loading:!1,task:h,error:h.error}),m.close();return}Mt(a,s,o.signal,!0,!0).then(j=>{if(j.service===i&&JSON.stringify(j)&&j.id!=="NO_CACHE_HIT"&&j.data){t({loading:!1,task:j,error:j.error}),m.close(1e3,i);return}})},m.onmessage=function(h){var j;let v=JSON.parse(h.data);v.cacheKey===n&&v.serviceName===i&&(s.cacheKey=n,((j=v.failureMessage)==null?void 0:j.length)>0?(r.error=v.failureMessage,r.status=pe.Failed,t({loading:!1,task:r,error:r.error}),m.close()):La(a,s,o,t,i,m))},m.onclose=function(h){},m.onerror=function(h){var v;((v=m.url)==null?void 0:v.length)>0&&t({loading:!1,error:"Error loading results. Unexpected socket error."})},m),Ba=async(r,e)=>{const t=Je.find(a=>a.url===r);if(t)return t.promise;if(r in Ge)return Ge[r];const n=fetch(r,{signal:e}).then(async a=>{const s=await a.json();if(e.aborted)throw new Error("Aborted");return Ge[r]=s,Je=Je.filter(i=>i.url!==r),s});return Je.push({url:r,promise:n}),n};Da.reset=()=>{Ge={}};const Xr=({style:r,children:e})=>{const[t,n,a]=Qt();return P.jsx("div",{style:r,dir:a?"rtl":"ltr",children:e})};Xr.__docgenInfo={description:"Controls text direction for report based on current language",methods:[],displayName:"ReportTextDirection",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},style:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""}}};const za={height:"auto",border:"1px solid rgba(0,0,0,0.12)",marginLeft:"auto",marginRight:"auto",borderRadius:2,position:"relative"},Va={backgroundColor:"#efefef",padding:8,margin:0,boxSizing:"border-box",boxShadow:"0px 0px 0px transparent, 0px 4px 4px 0px rgba(0, 0, 0, 0.06) inset, 0px 0px 0px transparent, 0px 0px 0px transparent"},qa={fontFamily:"sans-serif",padding:10,backgroundColor:"#f5f5f5",zIndex:2,borderBottom:"1px solid rgba(0,0,0,0.13)"},$t=({value:r={},children:e})=>{const[t,n]=ce.useState(500),a=rn({changeLanguage:o=>{i(m=>{const h=m.language!==o;return{...m,language:h?o:m.language}})},...r}),[s,i]=ce.useState(a);return P.jsx(kt.Provider,{value:{...s},children:P.jsxs("div",{style:{width:t,...za},children:[P.jsx("div",{style:qa,children:P.jsx("h1",{style:{fontSize:18,fontWeight:500},children:"Sketch Name"})}),P.jsx(Xr,{style:{...Va,width:t},children:e}),P.jsxs("div",{className:"storyControls",style:{position:"absolute",bottom:-30,display:"flex",justifyContent:"space-evenly",alignItems:"center",width:"100%"},children:[P.jsx(Xt,{}),P.jsxs("select",{value:t,onChange:o=>n(parseInt(o.target.value)),children:[P.jsx("option",{value:500,children:"Desktop - Standard Size"}),P.jsx("option",{value:800,children:"Desktop - Large"}),P.jsx("option",{value:320,children:"iPhone 5"}),P.jsx("option",{value:375,children:"iPhone 6, iPhone X"}),P.jsx("option",{value:414,children:"iPhone 6 Plus, iPhone 8 Plus, iPhone XR"}),P.jsx("option",{value:360,children:"Galaxy S5"}),P.jsx("option",{value:412,children:"Nexus 5x"}),P.jsx("option",{value:540,children:"Pixel"})]})]})]})})};$t.__docgenInfo={description:`Wraps a story to look and behave like a sketch report
It also replicates much of the functionality of App.tx like setting text
direction and loading ReportContext.
The context value can be added to or overridden by passing a value prop
Layout includes a language switcher (connected to the report context)
and a report width selector
The caller must wrap the story in a Translator component to provide translations`,methods:[],displayName:"ReportStoryLayout",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},value:{required:!1,tsType:{name:"Partial",elements:[{name:"ReportContextValue"}],raw:"Partial<ReportContextValue>"},description:"Optional ReportContext partial to merge",defaultValue:{value:"{}",computed:!1}}}};const en=r=>P.jsx($t,{children:r()}),Ya=en,Qa=r=>e=>P.jsx($t,{value:r,children:e()});en.__docgenInfo={description:"Decorator that renders a story into ReportStoryLayout.",methods:[],displayName:"ReportDecorator"};export{Xt as L,Fn as O,Ya as R,en as a,Kn as b,Qa as c,Qt as d,mt as l,Da as u};
