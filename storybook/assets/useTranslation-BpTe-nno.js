import{r as d}from"./index-CDs2tPxN.js";import{I as $,R as k,g as A,a as F}from"./context-CnTB_i5T.js";function M(){if(console&&console.warn){for(var o=arguments.length,e=new Array(o),n=0;n<o;n++)e[n]=arguments[n];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const T={};function C(){for(var o=arguments.length,e=new Array(o),n=0;n<o;n++)e[n]=arguments[n];typeof e[0]=="string"&&T[e[0]]||(typeof e[0]=="string"&&(T[e[0]]=new Date),M(...e))}const v=(o,e)=>()=>{if(o.isInitialized)e();else{const n=()=>{setTimeout(()=>{o.off("initialized",n)},0),e()};o.on("initialized",n)}};function S(o,e,n){o.loadNamespaces(e,v(o,n))}function R(o,e,n,a){typeof n=="string"&&(n=[n]),n.forEach(i=>{o.options.ns.indexOf(i)<0&&o.options.ns.push(i)}),o.loadLanguages(e,v(o,a))}function P(o,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=e.languages[0],i=e.options?e.options.fallbackLng:!1,t=e.languages[e.languages.length-1];if(a.toLowerCase()==="cimode")return!0;const c=(w,m)=>{const s=e.services.backendConnector.state[`${w}|${m}`];return s===-1||s===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!c(e.isLanguageChangingTo,o)?!1:!!(e.hasResourceBundle(a,o)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||c(a,o)&&(!i||c(t,o)))}function j(o,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(C("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(o,{lng:n.lng,precheck:(i,t)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!t(i.isLanguageChangingTo,o))return!1}}):P(o,e,n)}const B=(o,e)=>{const n=d.useRef();return d.useEffect(()=>{n.current=o},[o,e]),n.current};function z(o,e,n,a){return o.getFixedT(e,n,a)}function J(o,e,n,a){return d.useCallback(z(o,e,n,a),[o,e,n,a])}function G(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:a,defaultNS:i}=d.useContext($)||{},t=n||a||F();if(t&&!t.reportNamespaces&&(t.reportNamespaces=new k),!t){C("You will need to pass in an i18next instance by using initReactI18next");const r=(g,u)=>typeof u=="string"?u:u&&typeof u=="object"&&typeof u.defaultValue=="string"?u.defaultValue:Array.isArray(g)?g[g.length-1]:g,f=[r,{},!1];return f.t=r,f.i18n={},f.ready=!1,f}t.options.react&&t.options.react.wait!==void 0&&C("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const c={...A(),...t.options.react,...e},{useSuspense:w,keyPrefix:m}=c;let s=i||t.options&&t.options.defaultNS;s=typeof s=="string"?[s]:s||["translation"],t.reportNamespaces.addUsedNamespaces&&t.reportNamespaces.addUsedNamespaces(s);const l=(t.isInitialized||t.initializedStoreOnce)&&s.every(r=>j(r,t,c)),E=J(t,e.lng||null,c.nsMode==="fallback"?s:s[0],m),x=()=>E,y=()=>z(t,e.lng||null,c.nsMode==="fallback"?s:s[0],m),[I,h]=d.useState(x);let N=s.join();e.lng&&(N=`${e.lng}${N}`);const L=B(N),p=d.useRef(!0);d.useEffect(()=>{const{bindI18n:r,bindI18nStore:f}=c;p.current=!0,!l&&!w&&(e.lng?R(t,e.lng,s,()=>{p.current&&h(y)}):S(t,s,()=>{p.current&&h(y)})),l&&L&&L!==N&&p.current&&h(y);function g(){p.current&&h(y)}return r&&t&&t.on(r,g),f&&t&&t.store.on(f,g),()=>{p.current=!1,r&&t&&r.split(" ").forEach(u=>t.off(u,g)),f&&t&&f.split(" ").forEach(u=>t.store.off(u,g))}},[t,N]),d.useEffect(()=>{p.current&&l&&h(x)},[t,m,l]);const b=[I,t,l];if(b.t=I,b.i18n=t,b.ready=l,l||!l&&!w)return b;throw new Promise(r=>{e.lng?R(t,e.lng,s,()=>r()):S(t,s,()=>r())})}export{G as u};
